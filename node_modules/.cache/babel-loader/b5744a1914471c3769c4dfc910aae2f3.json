{"ast":null,"code":"// Generated by IcedCoffeeScript 108.0.8\n(function () {\n  var C,\n      Deferrals,\n      Rendezvous,\n      exceptionHandler,\n      findDeferral,\n      make_defer_return,\n      stackWalk,\n      tick_counter,\n      trampoline,\n      warn,\n      __active_trace,\n      __c,\n      _trace_to_string,\n      __slice = [].slice;\n\n  C = require('./const');\n\n  make_defer_return = function (obj, defer_args, id, trace_template, multi) {\n    var k, ret, trace, v;\n    trace = {};\n\n    for (k in trace_template) {\n      v = trace_template[k];\n      trace[k] = v;\n    }\n\n    trace[C.lineno] = defer_args != null ? defer_args[C.lineno] : void 0;\n\n    ret = function () {\n      var inner_args, o, _ref;\n\n      inner_args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n\n      if (defer_args != null) {\n        if ((_ref = defer_args.assign_fn) != null) {\n          _ref.apply(null, inner_args);\n        }\n      }\n\n      if (obj) {\n        o = obj;\n\n        if (!multi) {\n          obj = null;\n        }\n\n        return o._fulfill(id, trace);\n      } else {\n        return warn(\"overused deferral at \" + _trace_to_string(trace));\n      }\n    };\n\n    ret[C.trace] = trace;\n    return ret;\n  };\n\n  __c = 0;\n\n  tick_counter = function (mod) {\n    __c++;\n\n    if (__c % mod === 0) {\n      __c = 0;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  __active_trace = null;\n\n  _trace_to_string = function (tr) {\n    var fn;\n    fn = tr[C.funcname] || \"<anonymous>\";\n    return \"\" + fn + \" (\" + tr[C.filename] + \":\" + (tr[C.lineno] + 1) + \")\";\n  };\n\n  warn = function (m) {\n    return typeof console !== \"undefined\" && console !== null ? console.error(\"ICED warning: \" + m) : void 0;\n  };\n\n  exports.trampoline = trampoline = function (fn) {\n    if (!tick_counter(500)) {\n      return fn();\n    } else if ((typeof process !== \"undefined\" && process !== null ? process.nextTick : void 0) != null) {\n      return process.nextTick(fn);\n    } else {\n      return setTimeout(fn);\n    }\n  };\n\n  exports.Deferrals = Deferrals = function () {\n    function Deferrals(k, trace) {\n      this.trace = trace;\n      this.continuation = k;\n      this.count = 1;\n      this.ret = null;\n    }\n\n    Deferrals.prototype._call = function (trace) {\n      var c;\n\n      if (this.continuation) {\n        __active_trace = trace;\n        c = this.continuation;\n        this.continuation = null;\n        return c(this.ret);\n      } else {\n        return warn(\"Entered dead await at \" + _trace_to_string(trace));\n      }\n    };\n\n    Deferrals.prototype._fulfill = function (id, trace) {\n      if (--this.count > 0) {} else {\n        return trampoline(function (_this) {\n          return function () {\n            return _this._call(trace);\n          };\n        }(this));\n      }\n    };\n\n    Deferrals.prototype.defer = function (args) {\n      var self;\n      this.count++;\n      self = this;\n      return make_defer_return(self, args, null, this.trace);\n    };\n\n    return Deferrals;\n  }();\n\n  exports.findDeferral = findDeferral = function (args) {\n    var a, _i, _len;\n\n    for (_i = 0, _len = args.length; _i < _len; _i++) {\n      a = args[_i];\n\n      if (a != null ? a[C.trace] : void 0) {\n        return a;\n      }\n    }\n\n    return null;\n  };\n\n  exports.Rendezvous = Rendezvous = function () {\n    var RvId;\n\n    function Rendezvous() {\n      this.completed = [];\n      this.waiters = [];\n      this.defer_id = 0;\n    }\n\n    RvId = function () {\n      function RvId(rv, id, multi) {\n        this.rv = rv;\n        this.id = id;\n        this.multi = multi;\n      }\n\n      RvId.prototype.defer = function (defer_args) {\n        return this.rv._defer_with_id(this.id, defer_args, this.multi);\n      };\n\n      return RvId;\n    }();\n\n    Rendezvous.prototype.wait = function (cb) {\n      var x;\n\n      if (this.completed.length) {\n        x = this.completed.shift();\n        return cb(x);\n      } else {\n        return this.waiters.push(cb);\n      }\n    };\n\n    Rendezvous.prototype.defer = function (defer_args) {\n      var id;\n      id = this.defer_id++;\n      return this._defer_with_id(id, defer_args);\n    };\n\n    Rendezvous.prototype.id = function (i, multi) {\n      multi = !!multi;\n      return new RvId(this, i, multi);\n    };\n\n    Rendezvous.prototype._fulfill = function (id, trace) {\n      var cb;\n\n      if (this.waiters.length) {\n        cb = this.waiters.shift();\n        return cb(id);\n      } else {\n        return this.completed.push(id);\n      }\n    };\n\n    Rendezvous.prototype._defer_with_id = function (id, defer_args, multi) {\n      this.count++;\n      return make_defer_return(this, defer_args, id, {}, multi);\n    };\n\n    return Rendezvous;\n  }();\n\n  exports.stackWalk = stackWalk = function (cb) {\n    var line, ret, tr, _ref;\n\n    ret = [];\n    tr = cb ? cb[C.trace] : __active_trace;\n\n    while (tr) {\n      line = \"   at \" + _trace_to_string(tr);\n      ret.push(line);\n      tr = tr != null ? (_ref = tr[C.parent]) != null ? _ref[C.trace] : void 0 : void 0;\n    }\n\n    return ret;\n  };\n\n  exports.exceptionHandler = exceptionHandler = function (err, logger) {\n    var stack;\n\n    if (!logger) {\n      logger = console.error;\n    }\n\n    logger(err.stack);\n    stack = stackWalk();\n\n    if (stack.length) {\n      logger(\"Iced 'stack' trace (w/ real line numbers):\");\n      return logger(stack.join(\"\\n\"));\n    }\n  };\n\n  exports.catchExceptions = function (logger) {\n    return typeof process !== \"undefined\" && process !== null ? process.on('uncaughtException', function (err) {\n      exceptionHandler(err, logger);\n      return process.exit(1);\n    }) : void 0;\n  };\n}).call(this);","map":{"version":3,"sources":["/home/os/Desktop/hello-world-tutorial/node_modules/iced-runtime/lib/runtime.js"],"names":["C","Deferrals","Rendezvous","exceptionHandler","findDeferral","make_defer_return","stackWalk","tick_counter","trampoline","warn","__active_trace","__c","_trace_to_string","__slice","slice","require","obj","defer_args","id","trace_template","multi","k","ret","trace","v","lineno","inner_args","o","_ref","arguments","length","call","assign_fn","apply","_fulfill","mod","tr","fn","funcname","filename","m","console","error","exports","process","nextTick","setTimeout","continuation","count","prototype","_call","c","_this","defer","args","self","a","_i","_len","RvId","completed","waiters","defer_id","rv","_defer_with_id","wait","cb","x","shift","push","i","line","parent","err","logger","stack","join","catchExceptions","on","exit"],"mappings":"AAAA;AACA,CAAC,YAAW;AACV,MAAIA,CAAJ;AAAA,MAAOC,SAAP;AAAA,MAAkBC,UAAlB;AAAA,MAA8BC,gBAA9B;AAAA,MAAgDC,YAAhD;AAAA,MAA8DC,iBAA9D;AAAA,MAAiFC,SAAjF;AAAA,MAA4FC,YAA5F;AAAA,MAA0GC,UAA1G;AAAA,MAAsHC,IAAtH;AAAA,MAA4HC,cAA5H;AAAA,MAA4IC,GAA5I;AAAA,MAAiJC,gBAAjJ;AAAA,MACEC,OAAO,GAAG,GAAGC,KADf;;AAGAd,EAAAA,CAAC,GAAGe,OAAO,CAAC,SAAD,CAAX;;AAEAV,EAAAA,iBAAiB,GAAG,UAASW,GAAT,EAAcC,UAAd,EAA0BC,EAA1B,EAA8BC,cAA9B,EAA8CC,KAA9C,EAAqD;AACvE,QAAIC,CAAJ,EAAOC,GAAP,EAAYC,KAAZ,EAAmBC,CAAnB;AACAD,IAAAA,KAAK,GAAG,EAAR;;AACA,SAAKF,CAAL,IAAUF,cAAV,EAA0B;AACxBK,MAAAA,CAAC,GAAGL,cAAc,CAACE,CAAD,CAAlB;AACAE,MAAAA,KAAK,CAACF,CAAD,CAAL,GAAWG,CAAX;AACD;;AACDD,IAAAA,KAAK,CAACvB,CAAC,CAACyB,MAAH,CAAL,GAAkBR,UAAU,IAAI,IAAd,GAAqBA,UAAU,CAACjB,CAAC,CAACyB,MAAH,CAA/B,GAA4C,KAAK,CAAnE;;AACAH,IAAAA,GAAG,GAAG,YAAW;AACf,UAAII,UAAJ,EAAgBC,CAAhB,EAAmBC,IAAnB;;AACAF,MAAAA,UAAU,GAAG,KAAKG,SAAS,CAACC,MAAf,GAAwBjB,OAAO,CAACkB,IAAR,CAAaF,SAAb,EAAwB,CAAxB,CAAxB,GAAqD,EAAlE;;AACA,UAAIZ,UAAU,IAAI,IAAlB,EAAwB;AACtB,YAAI,CAACW,IAAI,GAAGX,UAAU,CAACe,SAAnB,KAAiC,IAArC,EAA2C;AACzCJ,UAAAA,IAAI,CAACK,KAAL,CAAW,IAAX,EAAiBP,UAAjB;AACD;AACF;;AACD,UAAIV,GAAJ,EAAS;AACPW,QAAAA,CAAC,GAAGX,GAAJ;;AACA,YAAI,CAACI,KAAL,EAAY;AACVJ,UAAAA,GAAG,GAAG,IAAN;AACD;;AACD,eAAOW,CAAC,CAACO,QAAF,CAAWhB,EAAX,EAAeK,KAAf,CAAP;AACD,OAND,MAMO;AACL,eAAOd,IAAI,CAAC,0BAA2BG,gBAAgB,CAACW,KAAD,CAA5C,CAAX;AACD;AACF,KAjBD;;AAkBAD,IAAAA,GAAG,CAACtB,CAAC,CAACuB,KAAH,CAAH,GAAeA,KAAf;AACA,WAAOD,GAAP;AACD,GA5BD;;AA8BAX,EAAAA,GAAG,GAAG,CAAN;;AAEAJ,EAAAA,YAAY,GAAG,UAAS4B,GAAT,EAAc;AAC3BxB,IAAAA,GAAG;;AACH,QAAKA,GAAG,GAAGwB,GAAP,KAAgB,CAApB,EAAuB;AACrBxB,MAAAA,GAAG,GAAG,CAAN;AACA,aAAO,IAAP;AACD,KAHD,MAGO;AACL,aAAO,KAAP;AACD;AACF,GARD;;AAUAD,EAAAA,cAAc,GAAG,IAAjB;;AAEAE,EAAAA,gBAAgB,GAAG,UAASwB,EAAT,EAAa;AAC9B,QAAIC,EAAJ;AACAA,IAAAA,EAAE,GAAGD,EAAE,CAACpC,CAAC,CAACsC,QAAH,CAAF,IAAkB,aAAvB;AACA,WAAO,KAAKD,EAAL,GAAU,IAAV,GAAiBD,EAAE,CAACpC,CAAC,CAACuC,QAAH,CAAnB,GAAkC,GAAlC,IAAyCH,EAAE,CAACpC,CAAC,CAACyB,MAAH,CAAF,GAAe,CAAxD,IAA6D,GAApE;AACD,GAJD;;AAMAhB,EAAAA,IAAI,GAAG,UAAS+B,CAAT,EAAY;AACjB,WAAO,OAAOC,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,KAAK,IAA9C,GAAqDA,OAAO,CAACC,KAAR,CAAc,mBAAmBF,CAAjC,CAArD,GAA2F,KAAK,CAAvG;AACD,GAFD;;AAIAG,EAAAA,OAAO,CAACnC,UAAR,GAAqBA,UAAU,GAAG,UAAS6B,EAAT,EAAa;AAC7C,QAAI,CAAC9B,YAAY,CAAC,GAAD,CAAjB,EAAwB;AACtB,aAAO8B,EAAE,EAAT;AACD,KAFD,MAEO,IAAI,CAAC,OAAOO,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,KAAK,IAA9C,GAAqDA,OAAO,CAACC,QAA7D,GAAwE,KAAK,CAA9E,KAAoF,IAAxF,EAA8F;AACnG,aAAOD,OAAO,CAACC,QAAR,CAAiBR,EAAjB,CAAP;AACD,KAFM,MAEA;AACL,aAAOS,UAAU,CAACT,EAAD,CAAjB;AACD;AACF,GARD;;AAUAM,EAAAA,OAAO,CAAC1C,SAAR,GAAoBA,SAAS,GAAI,YAAW;AAC1C,aAASA,SAAT,CAAmBoB,CAAnB,EAAsBE,KAAtB,EAA6B;AAC3B,WAAKA,KAAL,GAAaA,KAAb;AACA,WAAKwB,YAAL,GAAoB1B,CAApB;AACA,WAAK2B,KAAL,GAAa,CAAb;AACA,WAAK1B,GAAL,GAAW,IAAX;AACD;;AAEDrB,IAAAA,SAAS,CAACgD,SAAV,CAAoBC,KAApB,GAA4B,UAAS3B,KAAT,EAAgB;AAC1C,UAAI4B,CAAJ;;AACA,UAAI,KAAKJ,YAAT,EAAuB;AACrBrC,QAAAA,cAAc,GAAGa,KAAjB;AACA4B,QAAAA,CAAC,GAAG,KAAKJ,YAAT;AACA,aAAKA,YAAL,GAAoB,IAApB;AACA,eAAOI,CAAC,CAAC,KAAK7B,GAAN,CAAR;AACD,OALD,MAKO;AACL,eAAOb,IAAI,CAAC,2BAA4BG,gBAAgB,CAACW,KAAD,CAA7C,CAAX;AACD;AACF,KAVD;;AAYAtB,IAAAA,SAAS,CAACgD,SAAV,CAAoBf,QAApB,GAA+B,UAAShB,EAAT,EAAaK,KAAb,EAAoB;AACjD,UAAI,EAAE,KAAKyB,KAAP,GAAe,CAAnB,EAAsB,CAErB,CAFD,MAEO;AACL,eAAOxC,UAAU,CAAG,UAAS4C,KAAT,EAAgB;AAClC,iBAAO,YAAW;AAChB,mBAAOA,KAAK,CAACF,KAAN,CAAY3B,KAAZ,CAAP;AACD,WAFD;AAGD,SAJkB,CAIhB,IAJgB,CAAF,CAAjB;AAKD;AACF,KAVD;;AAYAtB,IAAAA,SAAS,CAACgD,SAAV,CAAoBI,KAApB,GAA4B,UAASC,IAAT,EAAe;AACzC,UAAIC,IAAJ;AACA,WAAKP,KAAL;AACAO,MAAAA,IAAI,GAAG,IAAP;AACA,aAAOlD,iBAAiB,CAACkD,IAAD,EAAOD,IAAP,EAAa,IAAb,EAAmB,KAAK/B,KAAxB,CAAxB;AACD,KALD;;AAOA,WAAOtB,SAAP;AAED,GAzC+B,EAAhC;;AA2CA0C,EAAAA,OAAO,CAACvC,YAAR,GAAuBA,YAAY,GAAG,UAASkD,IAAT,EAAe;AACnD,QAAIE,CAAJ,EAAOC,EAAP,EAAWC,IAAX;;AACA,SAAKD,EAAE,GAAG,CAAL,EAAQC,IAAI,GAAGJ,IAAI,CAACxB,MAAzB,EAAiC2B,EAAE,GAAGC,IAAtC,EAA4CD,EAAE,EAA9C,EAAkD;AAChDD,MAAAA,CAAC,GAAGF,IAAI,CAACG,EAAD,CAAR;;AACA,UAAID,CAAC,IAAI,IAAL,GAAYA,CAAC,CAACxD,CAAC,CAACuB,KAAH,CAAb,GAAyB,KAAK,CAAlC,EAAqC;AACnC,eAAOiC,CAAP;AACD;AACF;;AACD,WAAO,IAAP;AACD,GATD;;AAWAb,EAAAA,OAAO,CAACzC,UAAR,GAAqBA,UAAU,GAAI,YAAW;AAC5C,QAAIyD,IAAJ;;AAEA,aAASzD,UAAT,GAAsB;AACpB,WAAK0D,SAAL,GAAiB,EAAjB;AACA,WAAKC,OAAL,GAAe,EAAf;AACA,WAAKC,QAAL,GAAgB,CAAhB;AACD;;AAEDH,IAAAA,IAAI,GAAI,YAAW;AACjB,eAASA,IAAT,CAAcI,EAAd,EAAkB7C,EAAlB,EAAsBE,KAAtB,EAA6B;AAC3B,aAAK2C,EAAL,GAAUA,EAAV;AACA,aAAK7C,EAAL,GAAUA,EAAV;AACA,aAAKE,KAAL,GAAaA,KAAb;AACD;;AAEDuC,MAAAA,IAAI,CAACV,SAAL,CAAeI,KAAf,GAAuB,UAASpC,UAAT,EAAqB;AAC1C,eAAO,KAAK8C,EAAL,CAAQC,cAAR,CAAuB,KAAK9C,EAA5B,EAAgCD,UAAhC,EAA4C,KAAKG,KAAjD,CAAP;AACD,OAFD;;AAIA,aAAOuC,IAAP;AAED,KAbM,EAAP;;AAeAzD,IAAAA,UAAU,CAAC+C,SAAX,CAAqBgB,IAArB,GAA4B,UAASC,EAAT,EAAa;AACvC,UAAIC,CAAJ;;AACA,UAAI,KAAKP,SAAL,CAAe9B,MAAnB,EAA2B;AACzBqC,QAAAA,CAAC,GAAG,KAAKP,SAAL,CAAeQ,KAAf,EAAJ;AACA,eAAOF,EAAE,CAACC,CAAD,CAAT;AACD,OAHD,MAGO;AACL,eAAO,KAAKN,OAAL,CAAaQ,IAAb,CAAkBH,EAAlB,CAAP;AACD;AACF,KARD;;AAUAhE,IAAAA,UAAU,CAAC+C,SAAX,CAAqBI,KAArB,GAA6B,UAASpC,UAAT,EAAqB;AAChD,UAAIC,EAAJ;AACAA,MAAAA,EAAE,GAAG,KAAK4C,QAAL,EAAL;AACA,aAAO,KAAKE,cAAL,CAAoB9C,EAApB,EAAwBD,UAAxB,CAAP;AACD,KAJD;;AAMAf,IAAAA,UAAU,CAAC+C,SAAX,CAAqB/B,EAArB,GAA0B,UAASoD,CAAT,EAAYlD,KAAZ,EAAmB;AAC3CA,MAAAA,KAAK,GAAG,CAAC,CAACA,KAAV;AACA,aAAO,IAAIuC,IAAJ,CAAS,IAAT,EAAeW,CAAf,EAAkBlD,KAAlB,CAAP;AACD,KAHD;;AAKAlB,IAAAA,UAAU,CAAC+C,SAAX,CAAqBf,QAArB,GAAgC,UAAShB,EAAT,EAAaK,KAAb,EAAoB;AAClD,UAAI2C,EAAJ;;AACA,UAAI,KAAKL,OAAL,CAAa/B,MAAjB,EAAyB;AACvBoC,QAAAA,EAAE,GAAG,KAAKL,OAAL,CAAaO,KAAb,EAAL;AACA,eAAOF,EAAE,CAAChD,EAAD,CAAT;AACD,OAHD,MAGO;AACL,eAAO,KAAK0C,SAAL,CAAeS,IAAf,CAAoBnD,EAApB,CAAP;AACD;AACF,KARD;;AAUAhB,IAAAA,UAAU,CAAC+C,SAAX,CAAqBe,cAArB,GAAsC,UAAS9C,EAAT,EAAaD,UAAb,EAAyBG,KAAzB,EAAgC;AACpE,WAAK4B,KAAL;AACA,aAAO3C,iBAAiB,CAAC,IAAD,EAAOY,UAAP,EAAmBC,EAAnB,EAAuB,EAAvB,EAA2BE,KAA3B,CAAxB;AACD,KAHD;;AAKA,WAAOlB,UAAP;AAED,GA9DiC,EAAlC;;AAgEAyC,EAAAA,OAAO,CAACrC,SAAR,GAAoBA,SAAS,GAAG,UAAS4D,EAAT,EAAa;AAC3C,QAAIK,IAAJ,EAAUjD,GAAV,EAAec,EAAf,EAAmBR,IAAnB;;AACAN,IAAAA,GAAG,GAAG,EAAN;AACAc,IAAAA,EAAE,GAAG8B,EAAE,GAAGA,EAAE,CAAClE,CAAC,CAACuB,KAAH,CAAL,GAAiBb,cAAxB;;AACA,WAAO0B,EAAP,EAAW;AACTmC,MAAAA,IAAI,GAAG,WAAY3D,gBAAgB,CAACwB,EAAD,CAAnC;AACAd,MAAAA,GAAG,CAAC+C,IAAJ,CAASE,IAAT;AACAnC,MAAAA,EAAE,GAAGA,EAAE,IAAI,IAAN,GAAa,CAACR,IAAI,GAAGQ,EAAE,CAACpC,CAAC,CAACwE,MAAH,CAAV,KAAyB,IAAzB,GAAgC5C,IAAI,CAAC5B,CAAC,CAACuB,KAAH,CAApC,GAAgD,KAAK,CAAlE,GAAsE,KAAK,CAAhF;AACD;;AACD,WAAOD,GAAP;AACD,GAVD;;AAYAqB,EAAAA,OAAO,CAACxC,gBAAR,GAA2BA,gBAAgB,GAAG,UAASsE,GAAT,EAAcC,MAAd,EAAsB;AAClE,QAAIC,KAAJ;;AACA,QAAI,CAACD,MAAL,EAAa;AACXA,MAAAA,MAAM,GAAGjC,OAAO,CAACC,KAAjB;AACD;;AACDgC,IAAAA,MAAM,CAACD,GAAG,CAACE,KAAL,CAAN;AACAA,IAAAA,KAAK,GAAGrE,SAAS,EAAjB;;AACA,QAAIqE,KAAK,CAAC7C,MAAV,EAAkB;AAChB4C,MAAAA,MAAM,CAAC,4CAAD,CAAN;AACA,aAAOA,MAAM,CAACC,KAAK,CAACC,IAAN,CAAW,IAAX,CAAD,CAAb;AACD;AACF,GAXD;;AAaAjC,EAAAA,OAAO,CAACkC,eAAR,GAA0B,UAASH,MAAT,EAAiB;AACzC,WAAO,OAAO9B,OAAP,KAAmB,WAAnB,IAAkCA,OAAO,KAAK,IAA9C,GAAqDA,OAAO,CAACkC,EAAR,CAAW,mBAAX,EAAgC,UAASL,GAAT,EAAc;AACxGtE,MAAAA,gBAAgB,CAACsE,GAAD,EAAMC,MAAN,CAAhB;AACA,aAAO9B,OAAO,CAACmC,IAAR,CAAa,CAAb,CAAP;AACD,KAH2D,CAArD,GAGF,KAAK,CAHV;AAID,GALD;AAOD,CA5ND,EA4NGhD,IA5NH,CA4NQ,IA5NR","sourcesContent":["// Generated by IcedCoffeeScript 108.0.8\n(function() {\n  var C, Deferrals, Rendezvous, exceptionHandler, findDeferral, make_defer_return, stackWalk, tick_counter, trampoline, warn, __active_trace, __c, _trace_to_string,\n    __slice = [].slice;\n\n  C = require('./const');\n\n  make_defer_return = function(obj, defer_args, id, trace_template, multi) {\n    var k, ret, trace, v;\n    trace = {};\n    for (k in trace_template) {\n      v = trace_template[k];\n      trace[k] = v;\n    }\n    trace[C.lineno] = defer_args != null ? defer_args[C.lineno] : void 0;\n    ret = function() {\n      var inner_args, o, _ref;\n      inner_args = 1 <= arguments.length ? __slice.call(arguments, 0) : [];\n      if (defer_args != null) {\n        if ((_ref = defer_args.assign_fn) != null) {\n          _ref.apply(null, inner_args);\n        }\n      }\n      if (obj) {\n        o = obj;\n        if (!multi) {\n          obj = null;\n        }\n        return o._fulfill(id, trace);\n      } else {\n        return warn(\"overused deferral at \" + (_trace_to_string(trace)));\n      }\n    };\n    ret[C.trace] = trace;\n    return ret;\n  };\n\n  __c = 0;\n\n  tick_counter = function(mod) {\n    __c++;\n    if ((__c % mod) === 0) {\n      __c = 0;\n      return true;\n    } else {\n      return false;\n    }\n  };\n\n  __active_trace = null;\n\n  _trace_to_string = function(tr) {\n    var fn;\n    fn = tr[C.funcname] || \"<anonymous>\";\n    return \"\" + fn + \" (\" + tr[C.filename] + \":\" + (tr[C.lineno] + 1) + \")\";\n  };\n\n  warn = function(m) {\n    return typeof console !== \"undefined\" && console !== null ? console.error(\"ICED warning: \" + m) : void 0;\n  };\n\n  exports.trampoline = trampoline = function(fn) {\n    if (!tick_counter(500)) {\n      return fn();\n    } else if ((typeof process !== \"undefined\" && process !== null ? process.nextTick : void 0) != null) {\n      return process.nextTick(fn);\n    } else {\n      return setTimeout(fn);\n    }\n  };\n\n  exports.Deferrals = Deferrals = (function() {\n    function Deferrals(k, trace) {\n      this.trace = trace;\n      this.continuation = k;\n      this.count = 1;\n      this.ret = null;\n    }\n\n    Deferrals.prototype._call = function(trace) {\n      var c;\n      if (this.continuation) {\n        __active_trace = trace;\n        c = this.continuation;\n        this.continuation = null;\n        return c(this.ret);\n      } else {\n        return warn(\"Entered dead await at \" + (_trace_to_string(trace)));\n      }\n    };\n\n    Deferrals.prototype._fulfill = function(id, trace) {\n      if (--this.count > 0) {\n\n      } else {\n        return trampoline(((function(_this) {\n          return function() {\n            return _this._call(trace);\n          };\n        })(this)));\n      }\n    };\n\n    Deferrals.prototype.defer = function(args) {\n      var self;\n      this.count++;\n      self = this;\n      return make_defer_return(self, args, null, this.trace);\n    };\n\n    return Deferrals;\n\n  })();\n\n  exports.findDeferral = findDeferral = function(args) {\n    var a, _i, _len;\n    for (_i = 0, _len = args.length; _i < _len; _i++) {\n      a = args[_i];\n      if (a != null ? a[C.trace] : void 0) {\n        return a;\n      }\n    }\n    return null;\n  };\n\n  exports.Rendezvous = Rendezvous = (function() {\n    var RvId;\n\n    function Rendezvous() {\n      this.completed = [];\n      this.waiters = [];\n      this.defer_id = 0;\n    }\n\n    RvId = (function() {\n      function RvId(rv, id, multi) {\n        this.rv = rv;\n        this.id = id;\n        this.multi = multi;\n      }\n\n      RvId.prototype.defer = function(defer_args) {\n        return this.rv._defer_with_id(this.id, defer_args, this.multi);\n      };\n\n      return RvId;\n\n    })();\n\n    Rendezvous.prototype.wait = function(cb) {\n      var x;\n      if (this.completed.length) {\n        x = this.completed.shift();\n        return cb(x);\n      } else {\n        return this.waiters.push(cb);\n      }\n    };\n\n    Rendezvous.prototype.defer = function(defer_args) {\n      var id;\n      id = this.defer_id++;\n      return this._defer_with_id(id, defer_args);\n    };\n\n    Rendezvous.prototype.id = function(i, multi) {\n      multi = !!multi;\n      return new RvId(this, i, multi);\n    };\n\n    Rendezvous.prototype._fulfill = function(id, trace) {\n      var cb;\n      if (this.waiters.length) {\n        cb = this.waiters.shift();\n        return cb(id);\n      } else {\n        return this.completed.push(id);\n      }\n    };\n\n    Rendezvous.prototype._defer_with_id = function(id, defer_args, multi) {\n      this.count++;\n      return make_defer_return(this, defer_args, id, {}, multi);\n    };\n\n    return Rendezvous;\n\n  })();\n\n  exports.stackWalk = stackWalk = function(cb) {\n    var line, ret, tr, _ref;\n    ret = [];\n    tr = cb ? cb[C.trace] : __active_trace;\n    while (tr) {\n      line = \"   at \" + (_trace_to_string(tr));\n      ret.push(line);\n      tr = tr != null ? (_ref = tr[C.parent]) != null ? _ref[C.trace] : void 0 : void 0;\n    }\n    return ret;\n  };\n\n  exports.exceptionHandler = exceptionHandler = function(err, logger) {\n    var stack;\n    if (!logger) {\n      logger = console.error;\n    }\n    logger(err.stack);\n    stack = stackWalk();\n    if (stack.length) {\n      logger(\"Iced 'stack' trace (w/ real line numbers):\");\n      return logger(stack.join(\"\\n\"));\n    }\n  };\n\n  exports.catchExceptions = function(logger) {\n    return typeof process !== \"undefined\" && process !== null ? process.on('uncaughtException', function(err) {\n      exceptionHandler(err, logger);\n      return process.exit(1);\n    }) : void 0;\n  };\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}