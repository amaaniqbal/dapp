{"ast":null,"code":"// Generated by IcedCoffeeScript 108.0.8\n(function () {\n  var HMAC, PBKDF2, WordArray, iced, pbkdf2, util, __iced_k, __iced_k_noop;\n\n  iced = require('iced-runtime');\n\n  __iced_k = __iced_k_noop = function () {};\n\n  HMAC = require('./hmac').HMAC;\n  WordArray = require('./wordarray').WordArray;\n  util = require('./util');\n\n  PBKDF2 = function () {\n    function PBKDF2(_arg) {\n      this.klass = _arg.klass, this.c = _arg.c;\n      this.c || (this.c = 1024);\n      this.klass || (this.klass = HMAC);\n    }\n\n    PBKDF2.prototype._PRF = function (input) {\n      this.prf.reset();\n      return this.prf.finalize(input);\n    };\n\n    PBKDF2.prototype._gen_T_i = function (_arg, cb) {\n      var U, i, progress_hook, ret, salt, seed, stop, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      salt = _arg.salt, i = _arg.i, progress_hook = _arg.progress_hook;\n      progress_hook(0);\n      seed = salt.clone().concat(new WordArray([i]));\n      U = this._PRF(seed);\n      ret = U.clone();\n      i = 1;\n      (function (_this) {\n        return function (__iced_k) {\n          var _while;\n\n          _while = function (__iced_k) {\n            var _break, _continue, _next;\n\n            _break = __iced_k;\n\n            _continue = function () {\n              return iced.trampoline(function () {\n                return _while(__iced_k);\n              });\n            };\n\n            _next = _continue;\n\n            if (!(i < _this.c)) {\n              return _break();\n            } else {\n              stop = Math.min(_this.c, i + 128);\n\n              while (i < stop) {\n                U = _this._PRF(U);\n                ret.xor(U, {});\n                i++;\n              }\n\n              progress_hook(i);\n\n              (function (__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\",\n                  funcname: \"PBKDF2._gen_T_i\"\n                });\n                util.default_delay(0, 0, __iced_deferrals.defer({\n                  lineno: 57\n                }));\n\n                __iced_deferrals._fulfill();\n              })(function () {\n                return _next(null);\n              });\n            }\n          };\n\n          _while(__iced_k);\n        };\n      })(this)(function (_this) {\n        return function () {\n          progress_hook(i);\n          return cb(ret);\n        };\n      }(this));\n    };\n\n    PBKDF2.prototype.run = function (_arg, cb) {\n      var bs, dkLen, flat, i, key, n, ph, progress_hook, salt, tmp, tph, words, ___iced_passed_deferral, __iced_deferrals, __iced_k, _begin, _end, _positive;\n\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n      this.prf = new this.klass(key);\n      bs = this.prf.get_output_size();\n      n = Math.ceil(dkLen / bs);\n      words = [];\n      tph = null;\n\n      ph = function (_this) {\n        return function (block) {\n          return function (iter) {\n            return typeof progress_hook === \"function\" ? progress_hook({\n              what: \"pbkdf2\",\n              total: n * _this.c,\n              i: block * _this.c + iter\n            }) : void 0;\n          };\n        };\n      }(this);\n\n      ph(0)(0);\n      (function (_this) {\n        return function (__iced_k) {\n          var _i, _results, _while;\n\n          i = 1;\n          _begin = 1;\n          _end = n;\n          _positive = _end > _begin;\n\n          _while = function (__iced_k) {\n            var _break, _continue, _next;\n\n            _break = __iced_k;\n\n            _continue = function () {\n              return iced.trampoline(function () {\n                if (_positive) {\n                  i += 1;\n                } else {\n                  i -= 1;\n                }\n\n                return _while(__iced_k);\n              });\n            };\n\n            _next = _continue;\n\n            if (!!(_positive === true && i > n || _positive === false && i < n)) {\n              return _break();\n            } else {\n              (function (__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\",\n                  funcname: \"PBKDF2.run\"\n                });\n\n                _this._gen_T_i({\n                  salt: salt,\n                  i: i,\n                  progress_hook: ph(i - 1)\n                }, __iced_deferrals.defer({\n                  assign_fn: function () {\n                    return function () {\n                      return tmp = arguments[0];\n                    };\n                  }(),\n                  lineno: 80\n                }));\n\n                __iced_deferrals._fulfill();\n              })(function () {\n                return _next(words.push(tmp.words));\n              });\n            }\n          };\n\n          _while(__iced_k);\n        };\n      })(this)(function (_this) {\n        return function () {\n          var _ref;\n\n          ph(n)(0);\n          flat = (_ref = []).concat.apply(_ref, words);\n          key.scrub();\n\n          _this.prf.scrub();\n\n          _this.prf = null;\n          return cb(new WordArray(flat, dkLen));\n        };\n      }(this));\n    };\n\n    return PBKDF2;\n  }();\n\n  pbkdf2 = function (_arg, cb) {\n    var c, dkLen, eng, key, klass, out, progress_hook, salt, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n\n    __iced_k = __iced_k_noop;\n    ___iced_passed_deferral = iced.findDeferral(arguments);\n    key = _arg.key, salt = _arg.salt, klass = _arg.klass, c = _arg.c, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n    eng = new PBKDF2({\n      klass: klass,\n      c: c\n    });\n    (function (_this) {\n      return function (__iced_k) {\n        __iced_deferrals = new iced.Deferrals(__iced_k, {\n          parent: ___iced_passed_deferral,\n          filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\"\n        });\n        eng.run({\n          key: key,\n          salt: salt,\n          dkLen: dkLen,\n          progress_hook: progress_hook\n        }, __iced_deferrals.defer({\n          assign_fn: function () {\n            return function () {\n              return out = arguments[0];\n            };\n          }(),\n          lineno: 106\n        }));\n\n        __iced_deferrals._fulfill();\n      };\n    })(this)(function (_this) {\n      return function () {\n        return cb(out);\n      };\n    }(this));\n  };\n\n  exports.pbkdf2 = pbkdf2;\n  exports.PBKDF2 = PBKDF2;\n}).call(this);","map":{"version":3,"sources":["/home/os/Desktop/hello-world-tutorial/node_modules/triplesec/lib/pbkdf2.js"],"names":["HMAC","PBKDF2","WordArray","iced","pbkdf2","util","__iced_k","__iced_k_noop","require","_arg","klass","c","prototype","_PRF","input","prf","reset","finalize","_gen_T_i","cb","U","i","progress_hook","ret","salt","seed","stop","___iced_passed_deferral","__iced_deferrals","findDeferral","arguments","clone","concat","_this","_while","_break","_continue","_next","trampoline","Math","min","xor","Deferrals","parent","filename","funcname","default_delay","defer","lineno","_fulfill","run","bs","dkLen","flat","key","n","ph","tmp","tph","words","_begin","_end","_positive","get_output_size","ceil","block","iter","what","total","_i","_results","assign_fn","push","_ref","apply","scrub","eng","out","exports","call"],"mappings":"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","sourcesContent":["// Generated by IcedCoffeeScript 108.0.8\n(function() {\n  var HMAC, PBKDF2, WordArray, iced, pbkdf2, util, __iced_k, __iced_k_noop;\n\n  iced = require('iced-runtime');\n  __iced_k = __iced_k_noop = function() {};\n\n  HMAC = require('./hmac').HMAC;\n\n  WordArray = require('./wordarray').WordArray;\n\n  util = require('./util');\n\n  PBKDF2 = (function() {\n    function PBKDF2(_arg) {\n      this.klass = _arg.klass, this.c = _arg.c;\n      this.c || (this.c = 1024);\n      this.klass || (this.klass = HMAC);\n    }\n\n    PBKDF2.prototype._PRF = function(input) {\n      this.prf.reset();\n      return this.prf.finalize(input);\n    };\n\n    PBKDF2.prototype._gen_T_i = function(_arg, cb) {\n      var U, i, progress_hook, ret, salt, seed, stop, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      salt = _arg.salt, i = _arg.i, progress_hook = _arg.progress_hook;\n      progress_hook(0);\n      seed = salt.clone().concat(new WordArray([i]));\n      U = this._PRF(seed);\n      ret = U.clone();\n      i = 1;\n      (function(_this) {\n        return (function(__iced_k) {\n          var _while;\n          _while = function(__iced_k) {\n            var _break, _continue, _next;\n            _break = __iced_k;\n            _continue = function() {\n              return iced.trampoline(function() {\n                return _while(__iced_k);\n              });\n            };\n            _next = _continue;\n            if (!(i < _this.c)) {\n              return _break();\n            } else {\n              stop = Math.min(_this.c, i + 128);\n              while (i < stop) {\n                U = _this._PRF(U);\n                ret.xor(U, {});\n                i++;\n              }\n              progress_hook(i);\n              (function(__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\",\n                  funcname: \"PBKDF2._gen_T_i\"\n                });\n                util.default_delay(0, 0, __iced_deferrals.defer({\n                  lineno: 57\n                }));\n                __iced_deferrals._fulfill();\n              })(function() {\n                return _next(null);\n              });\n            }\n          };\n          _while(__iced_k);\n        });\n      })(this)((function(_this) {\n        return function() {\n          progress_hook(i);\n          return cb(ret);\n        };\n      })(this));\n    };\n\n    PBKDF2.prototype.run = function(_arg, cb) {\n      var bs, dkLen, flat, i, key, n, ph, progress_hook, salt, tmp, tph, words, ___iced_passed_deferral, __iced_deferrals, __iced_k, _begin, _end, _positive;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n      this.prf = new this.klass(key);\n      bs = this.prf.get_output_size();\n      n = Math.ceil(dkLen / bs);\n      words = [];\n      tph = null;\n      ph = (function(_this) {\n        return function(block) {\n          return function(iter) {\n            return typeof progress_hook === \"function\" ? progress_hook({\n              what: \"pbkdf2\",\n              total: n * _this.c,\n              i: block * _this.c + iter\n            }) : void 0;\n          };\n        };\n      })(this);\n      ph(0)(0);\n      (function(_this) {\n        return (function(__iced_k) {\n          var _i, _results, _while;\n          i = 1;\n          _begin = 1;\n          _end = n;\n          _positive = _end > _begin;\n          _while = function(__iced_k) {\n            var _break, _continue, _next;\n            _break = __iced_k;\n            _continue = function() {\n              return iced.trampoline(function() {\n                if (_positive) {\n                  i += 1;\n                } else {\n                  i -= 1;\n                }\n                return _while(__iced_k);\n              });\n            };\n            _next = _continue;\n            if (!!((_positive === true && i > n) || (_positive === false && i < n))) {\n              return _break();\n            } else {\n\n              (function(__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\",\n                  funcname: \"PBKDF2.run\"\n                });\n                _this._gen_T_i({\n                  salt: salt,\n                  i: i,\n                  progress_hook: ph(i - 1)\n                }, __iced_deferrals.defer({\n                  assign_fn: (function() {\n                    return function() {\n                      return tmp = arguments[0];\n                    };\n                  })(),\n                  lineno: 80\n                }));\n                __iced_deferrals._fulfill();\n              })(function() {\n                return _next(words.push(tmp.words));\n              });\n            }\n          };\n          _while(__iced_k);\n        });\n      })(this)((function(_this) {\n        return function() {\n          var _ref;\n          ph(n)(0);\n          flat = (_ref = []).concat.apply(_ref, words);\n          key.scrub();\n          _this.prf.scrub();\n          _this.prf = null;\n          return cb(new WordArray(flat, dkLen));\n        };\n      })(this));\n    };\n\n    return PBKDF2;\n\n  })();\n\n  pbkdf2 = function(_arg, cb) {\n    var c, dkLen, eng, key, klass, out, progress_hook, salt, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n    __iced_k = __iced_k_noop;\n    ___iced_passed_deferral = iced.findDeferral(arguments);\n    key = _arg.key, salt = _arg.salt, klass = _arg.klass, c = _arg.c, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n    eng = new PBKDF2({\n      klass: klass,\n      c: c\n    });\n    (function(_this) {\n      return (function(__iced_k) {\n        __iced_deferrals = new iced.Deferrals(__iced_k, {\n          parent: ___iced_passed_deferral,\n          filename: \"/Users/max/src/keybase/triplesec/src/pbkdf2.iced\"\n        });\n        eng.run({\n          key: key,\n          salt: salt,\n          dkLen: dkLen,\n          progress_hook: progress_hook\n        }, __iced_deferrals.defer({\n          assign_fn: (function() {\n            return function() {\n              return out = arguments[0];\n            };\n          })(),\n          lineno: 106\n        }));\n        __iced_deferrals._fulfill();\n      });\n    })(this)((function(_this) {\n      return function() {\n        return cb(out);\n      };\n    })(this));\n  };\n\n  exports.pbkdf2 = pbkdf2;\n\n  exports.PBKDF2 = PBKDF2;\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}