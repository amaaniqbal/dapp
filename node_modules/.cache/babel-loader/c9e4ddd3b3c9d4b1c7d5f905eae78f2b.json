{"ast":null,"code":"// Generated by IcedCoffeeScript 108.0.8\n(function () {\n  var HMAC_SHA256, Salsa20InnerCore, Scrypt, Timer, WordArray, blkcpy, blkxor, default_delay, endian_reverse, fixup_uint32, iced, pbkdf2, scrub_vec, scrypt, timer, ui8a_to_buffer, v_endian_reverse, __iced_k, __iced_k_noop, _ref, _ref1, _ref2;\n\n  iced = require('iced-runtime');\n\n  __iced_k = __iced_k_noop = function () {};\n\n  HMAC_SHA256 = require('./hmac').HMAC_SHA256;\n  pbkdf2 = require('./pbkdf2').pbkdf2;\n  _ref = require('./salsa20'), endian_reverse = _ref.endian_reverse, Salsa20InnerCore = _ref.Salsa20InnerCore;\n  _ref1 = require('./wordarray'), ui8a_to_buffer = _ref1.ui8a_to_buffer, WordArray = _ref1.WordArray;\n  _ref2 = require('./util'), fixup_uint32 = _ref2.fixup_uint32, default_delay = _ref2.default_delay, scrub_vec = _ref2.scrub_vec;\n\n  Timer = function () {\n    function Timer() {\n      this.tot = 0;\n    }\n\n    Timer.prototype.start = function () {\n      return this._t = Date.now();\n    };\n\n    Timer.prototype.stop = function () {\n      return this.tot += Date.now() - this._t;\n    };\n\n    return Timer;\n  }();\n\n  timer = new Timer();\n\n  blkcpy = function (D, S, d_offset, s_offset, len) {\n    var end, i, j;\n    j = d_offset << 4 | 0;\n    i = s_offset << 4 | 0;\n    end = i + (len << 4) | 0;\n\n    while (i < end) {\n      D[j] = S[i];\n      D[j + 1] = S[i + 1];\n      D[j + 2] = S[i + 2];\n      D[j + 3] = S[i + 3];\n      D[j + 4] = S[i + 4];\n      D[j + 5] = S[i + 5];\n      D[j + 6] = S[i + 6];\n      D[j + 7] = S[i + 7];\n      D[j + 8] = S[i + 8];\n      D[j + 9] = S[i + 9];\n      D[j + 10] = S[i + 10];\n      D[j + 11] = S[i + 11];\n      D[j + 12] = S[i + 12];\n      D[j + 13] = S[i + 13];\n      D[j + 14] = S[i + 14];\n      D[j + 15] = S[i + 15];\n      i += 16;\n      j += 16;\n    }\n\n    return true;\n  };\n\n  blkxor = function (D, S, s_offset, len) {\n    var i, j;\n    len = len << 4 | 0;\n    i = 0;\n    j = s_offset << 4 | 0;\n\n    while (i < len) {\n      D[i] ^= S[j];\n      D[i + 1] ^= S[j + 1];\n      D[i + 2] ^= S[j + 2];\n      D[i + 3] ^= S[j + 3];\n      D[i + 4] ^= S[j + 4];\n      D[i + 5] ^= S[j + 5];\n      D[i + 6] ^= S[j + 6];\n      D[i + 7] ^= S[j + 7];\n      D[i + 8] ^= S[j + 8];\n      D[i + 9] ^= S[j + 9];\n      D[i + 10] ^= S[j + 10];\n      D[i + 11] ^= S[j + 11];\n      D[i + 12] ^= S[j + 12];\n      D[i + 13] ^= S[j + 13];\n      D[i + 14] ^= S[j + 14];\n      D[i + 15] ^= S[j + 15];\n      i += 16;\n      j += 16;\n    }\n\n    return true;\n  };\n\n  v_endian_reverse = function (v) {\n    var e, i, _i, _len;\n\n    for (i = _i = 0, _len = v.length; _i < _len; i = ++_i) {\n      e = v[i];\n      v[i] = endian_reverse(e);\n    }\n\n    return true;\n  };\n\n  Scrypt = function () {\n    function Scrypt(_arg) {\n      var N, c, c0, c1;\n      N = _arg.N, this.r = _arg.r, this.p = _arg.p, c = _arg.c, c0 = _arg.c0, c1 = _arg.c1, this.klass = _arg.klass;\n      this.N || (this.N = 1 << (N || 15));\n      this.r || (this.r = 8);\n      this.p || (this.p = 1);\n      this.c0 = c0 || c || 1;\n      this.c1 = c1 || c || 1;\n      this.klass || (this.klass = HMAC_SHA256);\n      this.X16_tmp = new Int32Array(0x10);\n      this.s20ic = new Salsa20InnerCore(8);\n    }\n\n    Scrypt.prototype.salsa20_8 = function (B) {\n      var X, i, x, _i, _len;\n\n      X = this.s20ic._core(B);\n\n      for (i = _i = 0, _len = X.length; _i < _len; i = ++_i) {\n        x = X[i];\n        B[i] += x;\n      }\n\n      return true;\n    };\n\n    Scrypt.prototype.pbkdf2 = function (_arg, cb) {\n      var c, dkLen, key, progress_hook, salt, wa, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook, c = _arg.c;\n      (function (_this) {\n        return function (__iced_k) {\n          __iced_deferrals = new iced.Deferrals(__iced_k, {\n            parent: ___iced_passed_deferral,\n            filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n            funcname: \"Scrypt.pbkdf2\"\n          });\n          pbkdf2({\n            key: key,\n            salt: salt,\n            c: c,\n            dkLen: dkLen,\n            klass: _this.klass,\n            progress_hook: progress_hook\n          }, __iced_deferrals.defer({\n            assign_fn: function () {\n              return function () {\n                return wa = arguments[0];\n              };\n            }(),\n            lineno: 109\n          }));\n\n          __iced_deferrals._fulfill();\n        };\n      })(this)(function (_this) {\n        return function () {\n          return cb(wa);\n        };\n      }(this));\n    };\n\n    Scrypt.prototype.blockmix_salsa8 = function (B, Y) {\n      var X, i, _i, _ref3;\n\n      X = this.X16_tmp;\n      blkcpy(X, B, 0, 2 * this.r - 1, 1);\n\n      for (i = _i = 0, _ref3 = 2 * this.r; 0 <= _ref3 ? _i < _ref3 : _i > _ref3; i = 0 <= _ref3 ? ++_i : --_i) {\n        blkxor(X, B, i, 1);\n        this.salsa20_8(X);\n        blkcpy(Y, X, i, 0, 1);\n      }\n\n      i = 0;\n\n      while (i < this.r) {\n        blkcpy(B, Y, i, i * 2, 1);\n        i++;\n      }\n\n      i = 0;\n\n      while (i < this.r) {\n        blkcpy(B, Y, i + this.r, i * 2 + 1, 1);\n        i++;\n      }\n\n      return true;\n    };\n\n    Scrypt.prototype.smix = function (_arg, cb) {\n      var B, V, X, XY, Y, i, j, lim, progress_hook, stop, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      B = _arg.B, V = _arg.V, XY = _arg.XY, progress_hook = _arg.progress_hook;\n      X = XY;\n      lim = 2 * this.r;\n      Y = XY.subarray(0x10 * lim);\n      blkcpy(X, B, 0, 0, lim);\n      i = 0;\n      (function (_this) {\n        return function (__iced_k) {\n          var _while;\n\n          _while = function (__iced_k) {\n            var _break, _continue, _next;\n\n            _break = __iced_k;\n\n            _continue = function () {\n              return iced.trampoline(function () {\n                return _while(__iced_k);\n              });\n            };\n\n            _next = _continue;\n\n            if (!(i < _this.N)) {\n              return _break();\n            } else {\n              stop = Math.min(_this.N, i + 2048);\n\n              while (i < stop) {\n                blkcpy(V, X, lim * i, 0, lim);\n\n                _this.blockmix_salsa8(X, Y);\n\n                i++;\n              }\n\n              if (typeof progress_hook === \"function\") {\n                progress_hook(i);\n              }\n\n              (function (__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                  funcname: \"Scrypt.smix\"\n                });\n                default_delay(0, 0, __iced_deferrals.defer({\n                  lineno: 166\n                }));\n\n                __iced_deferrals._fulfill();\n              })(_next);\n            }\n          };\n\n          _while(__iced_k);\n        };\n      })(this)(function (_this) {\n        return function () {\n          i = 0;\n\n          (function (__iced_k) {\n            var _while;\n\n            _while = function (__iced_k) {\n              var _break, _continue, _next;\n\n              _break = __iced_k;\n\n              _continue = function () {\n                return iced.trampoline(function () {\n                  return _while(__iced_k);\n                });\n              };\n\n              _next = _continue;\n\n              if (!(i < _this.N)) {\n                return _break();\n              } else {\n                stop = Math.min(_this.N, i + 256);\n\n                while (i < stop) {\n                  j = fixup_uint32(X[0x10 * (lim - 1)]) & _this.N - 1;\n                  blkxor(X, V, j * lim, lim);\n\n                  _this.blockmix_salsa8(X, Y);\n\n                  i++;\n                }\n\n                if (typeof progress_hook === \"function\") {\n                  progress_hook(i + _this.N);\n                }\n\n                (function (__iced_k) {\n                  __iced_deferrals = new iced.Deferrals(__iced_k, {\n                    parent: ___iced_passed_deferral,\n                    filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                    funcname: \"Scrypt.smix\"\n                  });\n                  default_delay(0, 0, __iced_deferrals.defer({\n                    lineno: 183\n                  }));\n\n                  __iced_deferrals._fulfill();\n                })(_next);\n              }\n            };\n\n            _while(__iced_k);\n          })(function () {\n            blkcpy(B, X, 0, 0, lim);\n            return cb();\n          });\n        };\n      }(this));\n    };\n\n    Scrypt.prototype.run = function (_arg, cb) {\n      var B, MAX, V, XY, dkLen, err, j, key, lph, out, progress_hook, ret, salt, ___iced_passed_deferral, __iced_deferrals, __iced_k, _begin, _end, _positive;\n\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n      MAX = 0xffffffff;\n      err = ret = null;\n      err = dkLen > MAX ? err = new Error(\"asked for too much data\") : this.r * this.p >= 1 << 30 ? new Error(\"r & p are too big\") : this.r > MAX / 128 / this.p || this.r > MAX / 256 || this.N > MAX / 128 / this.r ? new Error(\"N is too big\") : null;\n      XY = new Int32Array(64 * this.r);\n      V = new Int32Array(32 * this.r * this.N);\n\n      lph = function (o) {\n        o.what += \" (pass 1)\";\n        return typeof progress_hook === \"function\" ? progress_hook(o) : void 0;\n      };\n\n      (function (_this) {\n        return function (__iced_k) {\n          __iced_deferrals = new iced.Deferrals(__iced_k, {\n            parent: ___iced_passed_deferral,\n            filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n            funcname: \"Scrypt.run\"\n          });\n\n          _this.pbkdf2({\n            key: key.clone(),\n            salt: salt,\n            dkLen: 128 * _this.r * _this.p,\n            c: _this.c0,\n            progress_hook: lph\n          }, __iced_deferrals.defer({\n            assign_fn: function () {\n              return function () {\n                return B = arguments[0];\n              };\n            }(),\n            lineno: 214\n          }));\n\n          __iced_deferrals._fulfill();\n        };\n      })(this)(function (_this) {\n        return function () {\n          B = new Int32Array(B.words);\n          v_endian_reverse(B);\n\n          lph = function (j) {\n            return function (i) {\n              return typeof progress_hook === \"function\" ? progress_hook({\n                i: i + j * _this.N * 2,\n                what: \"scrypt\",\n                total: _this.p * _this.N * 2\n              }) : void 0;\n            };\n          };\n\n          (function (__iced_k) {\n            var _i, _results, _while;\n\n            j = 0;\n            _begin = 0;\n            _end = _this.p;\n            _positive = _end > _begin;\n\n            _while = function (__iced_k) {\n              var _break, _continue, _next;\n\n              _break = __iced_k;\n\n              _continue = function () {\n                return iced.trampoline(function () {\n                  if (_positive) {\n                    j += 1;\n                  } else {\n                    j -= 1;\n                  }\n\n                  return _while(__iced_k);\n                });\n              };\n\n              _next = _continue;\n\n              if (!!(_positive === true && j >= _this.p || _positive === false && j <= _this.p)) {\n                return _break();\n              } else {\n                (function (__iced_k) {\n                  __iced_deferrals = new iced.Deferrals(__iced_k, {\n                    parent: ___iced_passed_deferral,\n                    filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                    funcname: \"Scrypt.run\"\n                  });\n\n                  _this.smix({\n                    B: B.subarray(32 * _this.r * j),\n                    V: V,\n                    XY: XY,\n                    progress_hook: lph(j)\n                  }, __iced_deferrals.defer({\n                    lineno: 221\n                  }));\n\n                  __iced_deferrals._fulfill();\n                })(_next);\n              }\n            };\n\n            _while(__iced_k);\n          })(function () {\n            v_endian_reverse(B);\n\n            lph = function (o) {\n              o.what += \" (pass 2)\";\n              return typeof progress_hook === \"function\" ? progress_hook(o) : void 0;\n            };\n\n            (function (__iced_k) {\n              __iced_deferrals = new iced.Deferrals(__iced_k, {\n                parent: ___iced_passed_deferral,\n                filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                funcname: \"Scrypt.run\"\n              });\n\n              _this.pbkdf2({\n                key: key,\n                salt: WordArray.from_i32a(B),\n                dkLen: dkLen,\n                c: _this.c1,\n                progress_hook: lph\n              }, __iced_deferrals.defer({\n                assign_fn: function () {\n                  return function () {\n                    return out = arguments[0];\n                  };\n                }(),\n                lineno: 229\n              }));\n\n              __iced_deferrals._fulfill();\n            })(function () {\n              scrub_vec(XY);\n              scrub_vec(V);\n              scrub_vec(B);\n              key.scrub();\n              return cb(out);\n            });\n          });\n        };\n      }(this));\n    };\n\n    return Scrypt;\n  }();\n\n  scrypt = function (_arg, cb) {\n    var N, c, c0, c1, dkLen, eng, key, klass, p, progress_hook, r, salt, wa, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n\n    __iced_k = __iced_k_noop;\n    ___iced_passed_deferral = iced.findDeferral(arguments);\n    key = _arg.key, salt = _arg.salt, r = _arg.r, N = _arg.N, p = _arg.p, c0 = _arg.c0, c1 = _arg.c1, c = _arg.c, klass = _arg.klass, progress_hook = _arg.progress_hook, dkLen = _arg.dkLen;\n    eng = new Scrypt({\n      r: r,\n      N: N,\n      p: p,\n      c: c,\n      c0: c0,\n      c1: c1,\n      klass: klass\n    });\n    (function (_this) {\n      return function (__iced_k) {\n        __iced_deferrals = new iced.Deferrals(__iced_k, {\n          parent: ___iced_passed_deferral,\n          filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\"\n        });\n        eng.run({\n          key: key,\n          salt: salt,\n          progress_hook: progress_hook,\n          dkLen: dkLen\n        }, __iced_deferrals.defer({\n          assign_fn: function () {\n            return function () {\n              return wa = arguments[0];\n            };\n          }(),\n          lineno: 259\n        }));\n\n        __iced_deferrals._fulfill();\n      };\n    })(this)(function (_this) {\n      return function () {\n        return cb(wa);\n      };\n    }(this));\n  };\n\n  exports.Scrypt = Scrypt;\n  exports.scrypt = scrypt;\n  exports.v_endian_reverse = v_endian_reverse;\n}).call(this);","map":{"version":3,"sources":["/home/os/Desktop/hello-world-tutorial/node_modules/triplesec/lib/scrypt.js"],"names":["HMAC_SHA256","Salsa20InnerCore","Scrypt","Timer","WordArray","blkcpy","blkxor","default_delay","endian_reverse","fixup_uint32","iced","pbkdf2","scrub_vec","scrypt","timer","ui8a_to_buffer","v_endian_reverse","__iced_k","__iced_k_noop","_ref","_ref1","_ref2","require","tot","prototype","start","_t","Date","now","stop","D","S","d_offset","s_offset","len","end","i","j","v","e","_i","_len","length","_arg","N","c","c0","c1","r","p","klass","X16_tmp","Int32Array","s20ic","salsa20_8","B","X","x","_core","cb","dkLen","key","progress_hook","salt","wa","___iced_passed_deferral","__iced_deferrals","findDeferral","arguments","_this","Deferrals","parent","filename","funcname","defer","assign_fn","lineno","_fulfill","blockmix_salsa8","Y","_ref3","smix","V","XY","lim","subarray","_while","_break","_continue","_next","trampoline","Math","min","run","MAX","err","lph","out","ret","_begin","_end","_positive","Error","o","what","clone","words","total","_results","from_i32a","scrub","eng","exports","call"],"mappings":"AAAA;AACA,CAAC,YAAW;AACV,MAAIA,WAAJ,EAAiBC,gBAAjB,EAAmCC,MAAnC,EAA2CC,KAA3C,EAAkDC,SAAlD,EAA6DC,MAA7D,EAAqEC,MAArE,EAA6EC,aAA7E,EAA4FC,cAA5F,EAA4GC,YAA5G,EAA0HC,IAA1H,EAAgIC,MAAhI,EAAwIC,SAAxI,EAAmJC,MAAnJ,EAA2JC,KAA3J,EAAkKC,cAAlK,EAAkLC,gBAAlL,EAAoMC,QAApM,EAA8MC,aAA9M,EAA6NC,IAA7N,EAAmOC,KAAnO,EAA0OC,KAA1O;;AAEAX,EAAAA,IAAI,GAAGY,OAAO,CAAC,cAAD,CAAd;;AACAL,EAAAA,QAAQ,GAAGC,aAAa,GAAG,YAAW,CAAE,CAAxC;;AAEAlB,EAAAA,WAAW,GAAGsB,OAAO,CAAC,QAAD,CAAP,CAAkBtB,WAAhC;AAEAW,EAAAA,MAAM,GAAGW,OAAO,CAAC,UAAD,CAAP,CAAoBX,MAA7B;AAEAQ,EAAAA,IAAI,GAAGG,OAAO,CAAC,WAAD,CAAd,EAA6Bd,cAAc,GAAGW,IAAI,CAACX,cAAnD,EAAmEP,gBAAgB,GAAGkB,IAAI,CAAClB,gBAA3F;AAEAmB,EAAAA,KAAK,GAAGE,OAAO,CAAC,aAAD,CAAf,EAAgCP,cAAc,GAAGK,KAAK,CAACL,cAAvD,EAAuEX,SAAS,GAAGgB,KAAK,CAAChB,SAAzF;AAEAiB,EAAAA,KAAK,GAAGC,OAAO,CAAC,QAAD,CAAf,EAA2Bb,YAAY,GAAGY,KAAK,CAACZ,YAAhD,EAA8DF,aAAa,GAAGc,KAAK,CAACd,aAApF,EAAmGK,SAAS,GAAGS,KAAK,CAACT,SAArH;;AAEAT,EAAAA,KAAK,GAAI,YAAW;AAClB,aAASA,KAAT,GAAiB;AACf,WAAKoB,GAAL,GAAW,CAAX;AACD;;AAEDpB,IAAAA,KAAK,CAACqB,SAAN,CAAgBC,KAAhB,GAAwB,YAAW;AACjC,aAAO,KAAKC,EAAL,GAAUC,IAAI,CAACC,GAAL,EAAjB;AACD,KAFD;;AAIAzB,IAAAA,KAAK,CAACqB,SAAN,CAAgBK,IAAhB,GAAuB,YAAW;AAChC,aAAO,KAAKN,GAAL,IAAYI,IAAI,CAACC,GAAL,KAAa,KAAKF,EAArC;AACD,KAFD;;AAIA,WAAOvB,KAAP;AAED,GAfO,EAAR;;AAiBAW,EAAAA,KAAK,GAAG,IAAIX,KAAJ,EAAR;;AAEAE,EAAAA,MAAM,GAAG,UAASyB,CAAT,EAAYC,CAAZ,EAAeC,QAAf,EAAyBC,QAAzB,EAAmCC,GAAnC,EAAwC;AAC/C,QAAIC,GAAJ,EAASC,CAAT,EAAYC,CAAZ;AACAA,IAAAA,CAAC,GAAIL,QAAQ,IAAI,CAAb,GAAkB,CAAtB;AACAI,IAAAA,CAAC,GAAIH,QAAQ,IAAI,CAAb,GAAkB,CAAtB;AACAE,IAAAA,GAAG,GAAIC,CAAC,IAAIF,GAAG,IAAI,CAAX,CAAF,GAAmB,CAAzB;;AACA,WAAOE,CAAC,GAAGD,GAAX,EAAgB;AACdL,MAAAA,CAAC,CAACO,CAAD,CAAD,GAAON,CAAC,CAACK,CAAD,CAAR;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,CAAL,CAAD,GAAWN,CAAC,CAACK,CAAC,GAAG,CAAL,CAAZ;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAN,MAAAA,CAAC,CAACO,CAAC,GAAG,EAAL,CAAD,GAAYN,CAAC,CAACK,CAAC,GAAG,EAAL,CAAb;AACAA,MAAAA,CAAC,IAAI,EAAL;AACAC,MAAAA,CAAC,IAAI,EAAL;AACD;;AACD,WAAO,IAAP;AACD,GA1BD;;AA4BA/B,EAAAA,MAAM,GAAG,UAASwB,CAAT,EAAYC,CAAZ,EAAeE,QAAf,EAAyBC,GAAzB,EAA8B;AACrC,QAAIE,CAAJ,EAAOC,CAAP;AACAH,IAAAA,GAAG,GAAIA,GAAG,IAAI,CAAR,GAAa,CAAnB;AACAE,IAAAA,CAAC,GAAG,CAAJ;AACAC,IAAAA,CAAC,GAAIJ,QAAQ,IAAI,CAAb,GAAkB,CAAtB;;AACA,WAAOG,CAAC,GAAGF,GAAX,EAAgB;AACdJ,MAAAA,CAAC,CAACM,CAAD,CAAD,IAAQL,CAAC,CAACM,CAAD,CAAT;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,CAAL,CAAD,IAAYL,CAAC,CAACM,CAAC,GAAG,CAAL,CAAb;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAP,MAAAA,CAAC,CAACM,CAAC,GAAG,EAAL,CAAD,IAAaL,CAAC,CAACM,CAAC,GAAG,EAAL,CAAd;AACAD,MAAAA,CAAC,IAAI,EAAL;AACAC,MAAAA,CAAC,IAAI,EAAL;AACD;;AACD,WAAO,IAAP;AACD,GA1BD;;AA4BArB,EAAAA,gBAAgB,GAAG,UAASsB,CAAT,EAAY;AAC7B,QAAIC,CAAJ,EAAOH,CAAP,EAAUI,EAAV,EAAcC,IAAd;;AACA,SAAKL,CAAC,GAAGI,EAAE,GAAG,CAAT,EAAYC,IAAI,GAAGH,CAAC,CAACI,MAA1B,EAAkCF,EAAE,GAAGC,IAAvC,EAA6CL,CAAC,GAAG,EAAEI,EAAnD,EAAuD;AACrDD,MAAAA,CAAC,GAAGD,CAAC,CAACF,CAAD,CAAL;AACAE,MAAAA,CAAC,CAACF,CAAD,CAAD,GAAO5B,cAAc,CAAC+B,CAAD,CAArB;AACD;;AACD,WAAO,IAAP;AACD,GAPD;;AASArC,EAAAA,MAAM,GAAI,YAAW;AACnB,aAASA,MAAT,CAAgByC,IAAhB,EAAsB;AACpB,UAAIC,CAAJ,EAAOC,CAAP,EAAUC,EAAV,EAAcC,EAAd;AACAH,MAAAA,CAAC,GAAGD,IAAI,CAACC,CAAT,EAAY,KAAKI,CAAL,GAASL,IAAI,CAACK,CAA1B,EAA6B,KAAKC,CAAL,GAASN,IAAI,CAACM,CAA3C,EAA8CJ,CAAC,GAAGF,IAAI,CAACE,CAAvD,EAA0DC,EAAE,GAAGH,IAAI,CAACG,EAApE,EAAwEC,EAAE,GAAGJ,IAAI,CAACI,EAAlF,EAAsF,KAAKG,KAAL,GAAaP,IAAI,CAACO,KAAxG;AACA,WAAKN,CAAL,KAAW,KAAKA,CAAL,GAAS,MAAMA,CAAC,IAAI,EAAX,CAApB;AACA,WAAKI,CAAL,KAAW,KAAKA,CAAL,GAAS,CAApB;AACA,WAAKC,CAAL,KAAW,KAAKA,CAAL,GAAS,CAApB;AACA,WAAKH,EAAL,GAAUA,EAAE,IAAID,CAAN,IAAW,CAArB;AACA,WAAKE,EAAL,GAAUA,EAAE,IAAIF,CAAN,IAAW,CAArB;AACA,WAAKK,KAAL,KAAe,KAAKA,KAAL,GAAalD,WAA5B;AACA,WAAKmD,OAAL,GAAe,IAAIC,UAAJ,CAAe,IAAf,CAAf;AACA,WAAKC,KAAL,GAAa,IAAIpD,gBAAJ,CAAqB,CAArB,CAAb;AACD;;AAEDC,IAAAA,MAAM,CAACsB,SAAP,CAAiB8B,SAAjB,GAA6B,UAASC,CAAT,EAAY;AACvC,UAAIC,CAAJ,EAAOpB,CAAP,EAAUqB,CAAV,EAAajB,EAAb,EAAiBC,IAAjB;;AACAe,MAAAA,CAAC,GAAG,KAAKH,KAAL,CAAWK,KAAX,CAAiBH,CAAjB,CAAJ;;AACA,WAAKnB,CAAC,GAAGI,EAAE,GAAG,CAAT,EAAYC,IAAI,GAAGe,CAAC,CAACd,MAA1B,EAAkCF,EAAE,GAAGC,IAAvC,EAA6CL,CAAC,GAAG,EAAEI,EAAnD,EAAuD;AACrDiB,QAAAA,CAAC,GAAGD,CAAC,CAACpB,CAAD,CAAL;AACAmB,QAAAA,CAAC,CAACnB,CAAD,CAAD,IAAQqB,CAAR;AACD;;AACD,aAAO,IAAP;AACD,KARD;;AAUAvD,IAAAA,MAAM,CAACsB,SAAP,CAAiBb,MAAjB,GAA0B,UAASgC,IAAT,EAAegB,EAAf,EAAmB;AAC3C,UAAId,CAAJ,EAAOe,KAAP,EAAcC,GAAd,EAAmBC,aAAnB,EAAkCC,IAAlC,EAAwCC,EAAxC,EAA4CC,uBAA5C,EAAqEC,gBAArE,EAAuFjD,QAAvF;;AACAA,MAAAA,QAAQ,GAAGC,aAAX;AACA+C,MAAAA,uBAAuB,GAAGvD,IAAI,CAACyD,YAAL,CAAkBC,SAAlB,CAA1B;AACAP,MAAAA,GAAG,GAAGlB,IAAI,CAACkB,GAAX,EAAgBE,IAAI,GAAGpB,IAAI,CAACoB,IAA5B,EAAkCH,KAAK,GAAGjB,IAAI,CAACiB,KAA/C,EAAsDE,aAAa,GAAGnB,IAAI,CAACmB,aAA3E,EAA0FjB,CAAC,GAAGF,IAAI,CAACE,CAAnG;AACA,OAAC,UAASwB,KAAT,EAAgB;AACf,eAAQ,UAASpD,QAAT,EAAmB;AACzBiD,UAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,YAAAA,MAAM,EAAEN,uBADsC;AAE9CO,YAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,YAAAA,QAAQ,EAAE;AAHoC,WAA7B,CAAnB;AAKA9D,UAAAA,MAAM,CAAC;AACLkD,YAAAA,GAAG,EAAEA,GADA;AAELE,YAAAA,IAAI,EAAEA,IAFD;AAGLlB,YAAAA,CAAC,EAAEA,CAHE;AAILe,YAAAA,KAAK,EAAEA,KAJF;AAKLV,YAAAA,KAAK,EAAEmB,KAAK,CAACnB,KALR;AAMLY,YAAAA,aAAa,EAAEA;AANV,WAAD,EAOHI,gBAAgB,CAACQ,KAAjB,CAAuB;AACxBC,YAAAA,SAAS,EAAG,YAAW;AACrB,qBAAO,YAAW;AAChB,uBAAOX,EAAE,GAAGI,SAAS,CAAC,CAAD,CAArB;AACD,eAFD;AAGD,aAJU,EADa;AAMxBQ,YAAAA,MAAM,EAAE;AANgB,WAAvB,CAPG,CAAN;;AAeAV,UAAAA,gBAAgB,CAACW,QAAjB;AACD,SAtBD;AAuBD,OAxBD,EAwBG,IAxBH,EAwBU,UAASR,KAAT,EAAgB;AACxB,eAAO,YAAW;AAChB,iBAAOV,EAAE,CAACK,EAAD,CAAT;AACD,SAFD;AAGD,OAJQ,CAIN,IAJM,CAxBT;AA6BD,KAlCD;;AAoCA9D,IAAAA,MAAM,CAACsB,SAAP,CAAiBsD,eAAjB,GAAmC,UAASvB,CAAT,EAAYwB,CAAZ,EAAe;AAChD,UAAIvB,CAAJ,EAAOpB,CAAP,EAAUI,EAAV,EAAcwC,KAAd;;AACAxB,MAAAA,CAAC,GAAG,KAAKL,OAAT;AACA9C,MAAAA,MAAM,CAACmD,CAAD,EAAID,CAAJ,EAAO,CAAP,EAAU,IAAI,KAAKP,CAAT,GAAa,CAAvB,EAA0B,CAA1B,CAAN;;AACA,WAAKZ,CAAC,GAAGI,EAAE,GAAG,CAAT,EAAYwC,KAAK,GAAG,IAAI,KAAKhC,CAAlC,EAAqC,KAAKgC,KAAL,GAAaxC,EAAE,GAAGwC,KAAlB,GAA0BxC,EAAE,GAAGwC,KAApE,EAA2E5C,CAAC,GAAG,KAAK4C,KAAL,GAAa,EAAExC,EAAf,GAAoB,EAAEA,EAArG,EAAyG;AACvGlC,QAAAA,MAAM,CAACkD,CAAD,EAAID,CAAJ,EAAOnB,CAAP,EAAU,CAAV,CAAN;AACA,aAAKkB,SAAL,CAAeE,CAAf;AACAnD,QAAAA,MAAM,CAAC0E,CAAD,EAAIvB,CAAJ,EAAOpB,CAAP,EAAU,CAAV,EAAa,CAAb,CAAN;AACD;;AACDA,MAAAA,CAAC,GAAG,CAAJ;;AACA,aAAOA,CAAC,GAAG,KAAKY,CAAhB,EAAmB;AACjB3C,QAAAA,MAAM,CAACkD,CAAD,EAAIwB,CAAJ,EAAO3C,CAAP,EAAUA,CAAC,GAAG,CAAd,EAAiB,CAAjB,CAAN;AACAA,QAAAA,CAAC;AACF;;AACDA,MAAAA,CAAC,GAAG,CAAJ;;AACA,aAAOA,CAAC,GAAG,KAAKY,CAAhB,EAAmB;AACjB3C,QAAAA,MAAM,CAACkD,CAAD,EAAIwB,CAAJ,EAAO3C,CAAC,GAAG,KAAKY,CAAhB,EAAmBZ,CAAC,GAAG,CAAJ,GAAQ,CAA3B,EAA8B,CAA9B,CAAN;AACAA,QAAAA,CAAC;AACF;;AACD,aAAO,IAAP;AACD,KApBD;;AAsBAlC,IAAAA,MAAM,CAACsB,SAAP,CAAiByD,IAAjB,GAAwB,UAAStC,IAAT,EAAegB,EAAf,EAAmB;AACzC,UAAIJ,CAAJ,EAAO2B,CAAP,EAAU1B,CAAV,EAAa2B,EAAb,EAAiBJ,CAAjB,EAAoB3C,CAApB,EAAuBC,CAAvB,EAA0B+C,GAA1B,EAA+BtB,aAA/B,EAA8CjC,IAA9C,EAAoDoC,uBAApD,EAA6EC,gBAA7E,EAA+FjD,QAA/F;;AACAA,MAAAA,QAAQ,GAAGC,aAAX;AACA+C,MAAAA,uBAAuB,GAAGvD,IAAI,CAACyD,YAAL,CAAkBC,SAAlB,CAA1B;AACAb,MAAAA,CAAC,GAAGZ,IAAI,CAACY,CAAT,EAAY2B,CAAC,GAAGvC,IAAI,CAACuC,CAArB,EAAwBC,EAAE,GAAGxC,IAAI,CAACwC,EAAlC,EAAsCrB,aAAa,GAAGnB,IAAI,CAACmB,aAA3D;AACAN,MAAAA,CAAC,GAAG2B,EAAJ;AACAC,MAAAA,GAAG,GAAG,IAAI,KAAKpC,CAAf;AACA+B,MAAAA,CAAC,GAAGI,EAAE,CAACE,QAAH,CAAY,OAAOD,GAAnB,CAAJ;AACA/E,MAAAA,MAAM,CAACmD,CAAD,EAAID,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa6B,GAAb,CAAN;AACAhD,MAAAA,CAAC,GAAG,CAAJ;AACA,OAAC,UAASiC,KAAT,EAAgB;AACf,eAAQ,UAASpD,QAAT,EAAmB;AACzB,cAAIqE,MAAJ;;AACAA,UAAAA,MAAM,GAAG,UAASrE,QAAT,EAAmB;AAC1B,gBAAIsE,MAAJ,EAAYC,SAAZ,EAAuBC,KAAvB;;AACAF,YAAAA,MAAM,GAAGtE,QAAT;;AACAuE,YAAAA,SAAS,GAAG,YAAW;AACrB,qBAAO9E,IAAI,CAACgF,UAAL,CAAgB,YAAW;AAChC,uBAAOJ,MAAM,CAACrE,QAAD,CAAb;AACD,eAFM,CAAP;AAGD,aAJD;;AAKAwE,YAAAA,KAAK,GAAGD,SAAR;;AACA,gBAAI,EAAEpD,CAAC,GAAGiC,KAAK,CAACzB,CAAZ,CAAJ,EAAoB;AAClB,qBAAO2C,MAAM,EAAb;AACD,aAFD,MAEO;AACL1D,cAAAA,IAAI,GAAG8D,IAAI,CAACC,GAAL,CAASvB,KAAK,CAACzB,CAAf,EAAkBR,CAAC,GAAG,IAAtB,CAAP;;AACA,qBAAOA,CAAC,GAAGP,IAAX,EAAiB;AACfxB,gBAAAA,MAAM,CAAC6E,CAAD,EAAI1B,CAAJ,EAAO4B,GAAG,GAAGhD,CAAb,EAAgB,CAAhB,EAAmBgD,GAAnB,CAAN;;AACAf,gBAAAA,KAAK,CAACS,eAAN,CAAsBtB,CAAtB,EAAyBuB,CAAzB;;AACA3C,gBAAAA,CAAC;AACF;;AACD,kBAAI,OAAO0B,aAAP,KAAyB,UAA7B,EAAyC;AACvCA,gBAAAA,aAAa,CAAC1B,CAAD,CAAb;AACD;;AACD,eAAC,UAASnB,QAAT,EAAmB;AAClBiD,gBAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,kBAAAA,MAAM,EAAEN,uBADsC;AAE9CO,kBAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,kBAAAA,QAAQ,EAAE;AAHoC,iBAA7B,CAAnB;AAKAlE,gBAAAA,aAAa,CAAC,CAAD,EAAI,CAAJ,EAAO2D,gBAAgB,CAACQ,KAAjB,CAAuB;AACzCE,kBAAAA,MAAM,EAAE;AADiC,iBAAvB,CAAP,CAAb;;AAGAV,gBAAAA,gBAAgB,CAACW,QAAjB;AACD,eAVD,EAUGY,KAVH;AAWD;AACF,WAjCD;;AAkCAH,UAAAA,MAAM,CAACrE,QAAD,CAAN;AACD,SArCD;AAsCD,OAvCD,EAuCG,IAvCH,EAuCU,UAASoD,KAAT,EAAgB;AACxB,eAAO,YAAW;AAChBjC,UAAAA,CAAC,GAAG,CAAJ;;AACA,WAAC,UAASnB,QAAT,EAAmB;AAClB,gBAAIqE,MAAJ;;AACAA,YAAAA,MAAM,GAAG,UAASrE,QAAT,EAAmB;AAC1B,kBAAIsE,MAAJ,EAAYC,SAAZ,EAAuBC,KAAvB;;AACAF,cAAAA,MAAM,GAAGtE,QAAT;;AACAuE,cAAAA,SAAS,GAAG,YAAW;AACrB,uBAAO9E,IAAI,CAACgF,UAAL,CAAgB,YAAW;AAChC,yBAAOJ,MAAM,CAACrE,QAAD,CAAb;AACD,iBAFM,CAAP;AAGD,eAJD;;AAKAwE,cAAAA,KAAK,GAAGD,SAAR;;AACA,kBAAI,EAAEpD,CAAC,GAAGiC,KAAK,CAACzB,CAAZ,CAAJ,EAAoB;AAClB,uBAAO2C,MAAM,EAAb;AACD,eAFD,MAEO;AACL1D,gBAAAA,IAAI,GAAG8D,IAAI,CAACC,GAAL,CAASvB,KAAK,CAACzB,CAAf,EAAkBR,CAAC,GAAG,GAAtB,CAAP;;AACA,uBAAOA,CAAC,GAAGP,IAAX,EAAiB;AACfQ,kBAAAA,CAAC,GAAG5B,YAAY,CAAC+C,CAAC,CAAC,QAAQ4B,GAAG,GAAG,CAAd,CAAD,CAAF,CAAZ,GAAqCf,KAAK,CAACzB,CAAN,GAAU,CAAnD;AACAtC,kBAAAA,MAAM,CAACkD,CAAD,EAAI0B,CAAJ,EAAO7C,CAAC,GAAG+C,GAAX,EAAgBA,GAAhB,CAAN;;AACAf,kBAAAA,KAAK,CAACS,eAAN,CAAsBtB,CAAtB,EAAyBuB,CAAzB;;AACA3C,kBAAAA,CAAC;AACF;;AACD,oBAAI,OAAO0B,aAAP,KAAyB,UAA7B,EAAyC;AACvCA,kBAAAA,aAAa,CAAC1B,CAAC,GAAGiC,KAAK,CAACzB,CAAX,CAAb;AACD;;AACD,iBAAC,UAAS3B,QAAT,EAAmB;AAClBiD,kBAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,oBAAAA,MAAM,EAAEN,uBADsC;AAE9CO,oBAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,oBAAAA,QAAQ,EAAE;AAHoC,mBAA7B,CAAnB;AAKAlE,kBAAAA,aAAa,CAAC,CAAD,EAAI,CAAJ,EAAO2D,gBAAgB,CAACQ,KAAjB,CAAuB;AACzCE,oBAAAA,MAAM,EAAE;AADiC,mBAAvB,CAAP,CAAb;;AAGAV,kBAAAA,gBAAgB,CAACW,QAAjB;AACD,iBAVD,EAUGY,KAVH;AAWD;AACF,aAlCD;;AAmCAH,YAAAA,MAAM,CAACrE,QAAD,CAAN;AACD,WAtCD,EAsCG,YAAW;AACZZ,YAAAA,MAAM,CAACkD,CAAD,EAAIC,CAAJ,EAAO,CAAP,EAAU,CAAV,EAAa4B,GAAb,CAAN;AACA,mBAAOzB,EAAE,EAAT;AACD,WAzCD;AA0CD,SA5CD;AA6CD,OA9CQ,CA8CN,IA9CM,CAvCT;AAsFD,KAhGD;;AAkGAzD,IAAAA,MAAM,CAACsB,SAAP,CAAiBqE,GAAjB,GAAuB,UAASlD,IAAT,EAAegB,EAAf,EAAmB;AACxC,UAAIJ,CAAJ,EAAOuC,GAAP,EAAYZ,CAAZ,EAAeC,EAAf,EAAmBvB,KAAnB,EAA0BmC,GAA1B,EAA+B1D,CAA/B,EAAkCwB,GAAlC,EAAuCmC,GAAvC,EAA4CC,GAA5C,EAAiDnC,aAAjD,EAAgEoC,GAAhE,EAAqEnC,IAArE,EAA2EE,uBAA3E,EAAoGC,gBAApG,EAAsHjD,QAAtH,EAAgIkF,MAAhI,EAAwIC,IAAxI,EAA8IC,SAA9I;;AACApF,MAAAA,QAAQ,GAAGC,aAAX;AACA+C,MAAAA,uBAAuB,GAAGvD,IAAI,CAACyD,YAAL,CAAkBC,SAAlB,CAA1B;AACAP,MAAAA,GAAG,GAAGlB,IAAI,CAACkB,GAAX,EAAgBE,IAAI,GAAGpB,IAAI,CAACoB,IAA5B,EAAkCH,KAAK,GAAGjB,IAAI,CAACiB,KAA/C,EAAsDE,aAAa,GAAGnB,IAAI,CAACmB,aAA3E;AACAgC,MAAAA,GAAG,GAAG,UAAN;AACAC,MAAAA,GAAG,GAAGG,GAAG,GAAG,IAAZ;AACAH,MAAAA,GAAG,GAAGnC,KAAK,GAAGkC,GAAR,GAAcC,GAAG,GAAG,IAAIO,KAAJ,CAAU,yBAAV,CAApB,GAA2D,KAAKtD,CAAL,GAAS,KAAKC,CAAd,IAAoB,KAAK,EAAzB,GAA+B,IAAIqD,KAAJ,CAAU,mBAAV,CAA/B,GAAiE,KAAKtD,CAAL,GAAS8C,GAAG,GAAG,GAAN,GAAY,KAAK7C,CAA3B,IAAkC,KAAKD,CAAL,GAAS8C,GAAG,GAAG,GAAjD,IAA0D,KAAKlD,CAAL,GAASkD,GAAG,GAAG,GAAN,GAAY,KAAK9C,CAApF,GAAyF,IAAIsD,KAAJ,CAAU,cAAV,CAAzF,GAAqH,IAAtP;AACAnB,MAAAA,EAAE,GAAG,IAAI/B,UAAJ,CAAe,KAAK,KAAKJ,CAAzB,CAAL;AACAkC,MAAAA,CAAC,GAAG,IAAI9B,UAAJ,CAAe,KAAK,KAAKJ,CAAV,GAAc,KAAKJ,CAAlC,CAAJ;;AACAoD,MAAAA,GAAG,GAAG,UAASO,CAAT,EAAY;AAChBA,QAAAA,CAAC,CAACC,IAAF,IAAU,WAAV;AACA,eAAO,OAAO1C,aAAP,KAAyB,UAAzB,GAAsCA,aAAa,CAACyC,CAAD,CAAnD,GAAyD,KAAK,CAArE;AACD,OAHD;;AAIA,OAAC,UAASlC,KAAT,EAAgB;AACf,eAAQ,UAASpD,QAAT,EAAmB;AACzBiD,UAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,YAAAA,MAAM,EAAEN,uBADsC;AAE9CO,YAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,YAAAA,QAAQ,EAAE;AAHoC,WAA7B,CAAnB;;AAKAJ,UAAAA,KAAK,CAAC1D,MAAN,CAAa;AACXkD,YAAAA,GAAG,EAAEA,GAAG,CAAC4C,KAAJ,EADM;AAEX1C,YAAAA,IAAI,EAAEA,IAFK;AAGXH,YAAAA,KAAK,EAAE,MAAMS,KAAK,CAACrB,CAAZ,GAAgBqB,KAAK,CAACpB,CAHlB;AAIXJ,YAAAA,CAAC,EAAEwB,KAAK,CAACvB,EAJE;AAKXgB,YAAAA,aAAa,EAAEkC;AALJ,WAAb,EAMG9B,gBAAgB,CAACQ,KAAjB,CAAuB;AACxBC,YAAAA,SAAS,EAAG,YAAW;AACrB,qBAAO,YAAW;AAChB,uBAAOpB,CAAC,GAAGa,SAAS,CAAC,CAAD,CAApB;AACD,eAFD;AAGD,aAJU,EADa;AAMxBQ,YAAAA,MAAM,EAAE;AANgB,WAAvB,CANH;;AAcAV,UAAAA,gBAAgB,CAACW,QAAjB;AACD,SArBD;AAsBD,OAvBD,EAuBG,IAvBH,EAuBU,UAASR,KAAT,EAAgB;AACxB,eAAO,YAAW;AAChBd,UAAAA,CAAC,GAAG,IAAIH,UAAJ,CAAeG,CAAC,CAACmD,KAAjB,CAAJ;AACA1F,UAAAA,gBAAgB,CAACuC,CAAD,CAAhB;;AACAyC,UAAAA,GAAG,GAAG,UAAS3D,CAAT,EAAY;AAChB,mBAAO,UAASD,CAAT,EAAY;AACjB,qBAAO,OAAO0B,aAAP,KAAyB,UAAzB,GAAsCA,aAAa,CAAC;AACzD1B,gBAAAA,CAAC,EAAEA,CAAC,GAAGC,CAAC,GAAGgC,KAAK,CAACzB,CAAV,GAAc,CADoC;AAEzD4D,gBAAAA,IAAI,EAAE,QAFmD;AAGzDG,gBAAAA,KAAK,EAAEtC,KAAK,CAACpB,CAAN,GAAUoB,KAAK,CAACzB,CAAhB,GAAoB;AAH8B,eAAD,CAAnD,GAIF,KAAK,CAJV;AAKD,aAND;AAOD,WARD;;AASA,WAAC,UAAS3B,QAAT,EAAmB;AAClB,gBAAIuB,EAAJ,EAAQoE,QAAR,EAAkBtB,MAAlB;;AACAjD,YAAAA,CAAC,GAAG,CAAJ;AACA8D,YAAAA,MAAM,GAAG,CAAT;AACAC,YAAAA,IAAI,GAAG/B,KAAK,CAACpB,CAAb;AACAoD,YAAAA,SAAS,GAAGD,IAAI,GAAGD,MAAnB;;AACAb,YAAAA,MAAM,GAAG,UAASrE,QAAT,EAAmB;AAC1B,kBAAIsE,MAAJ,EAAYC,SAAZ,EAAuBC,KAAvB;;AACAF,cAAAA,MAAM,GAAGtE,QAAT;;AACAuE,cAAAA,SAAS,GAAG,YAAW;AACrB,uBAAO9E,IAAI,CAACgF,UAAL,CAAgB,YAAW;AAChC,sBAAIW,SAAJ,EAAe;AACbhE,oBAAAA,CAAC,IAAI,CAAL;AACD,mBAFD,MAEO;AACLA,oBAAAA,CAAC,IAAI,CAAL;AACD;;AACD,yBAAOiD,MAAM,CAACrE,QAAD,CAAb;AACD,iBAPM,CAAP;AAQD,eATD;;AAUAwE,cAAAA,KAAK,GAAGD,SAAR;;AACA,kBAAI,CAAC,EAAGa,SAAS,KAAK,IAAd,IAAsBhE,CAAC,IAAIgC,KAAK,CAACpB,CAAlC,IAAyCoD,SAAS,KAAK,KAAd,IAAuBhE,CAAC,IAAIgC,KAAK,CAACpB,CAA7E,CAAL,EAAuF;AACrF,uBAAOsC,MAAM,EAAb;AACD,eAFD,MAEO;AAEL,iBAAC,UAAStE,QAAT,EAAmB;AAClBiD,kBAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,oBAAAA,MAAM,EAAEN,uBADsC;AAE9CO,oBAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,oBAAAA,QAAQ,EAAE;AAHoC,mBAA7B,CAAnB;;AAKAJ,kBAAAA,KAAK,CAACY,IAAN,CAAW;AACT1B,oBAAAA,CAAC,EAAEA,CAAC,CAAC8B,QAAF,CAAW,KAAKhB,KAAK,CAACrB,CAAX,GAAeX,CAA1B,CADM;AAET6C,oBAAAA,CAAC,EAAEA,CAFM;AAGTC,oBAAAA,EAAE,EAAEA,EAHK;AAITrB,oBAAAA,aAAa,EAAEkC,GAAG,CAAC3D,CAAD;AAJT,mBAAX,EAKG6B,gBAAgB,CAACQ,KAAjB,CAAuB;AACxBE,oBAAAA,MAAM,EAAE;AADgB,mBAAvB,CALH;;AAQAV,kBAAAA,gBAAgB,CAACW,QAAjB;AACD,iBAfD,EAeGY,KAfH;AAgBD;AACF,aAnCD;;AAoCAH,YAAAA,MAAM,CAACrE,QAAD,CAAN;AACD,WA3CD,EA2CG,YAAW;AACZD,YAAAA,gBAAgB,CAACuC,CAAD,CAAhB;;AACAyC,YAAAA,GAAG,GAAG,UAASO,CAAT,EAAY;AAChBA,cAAAA,CAAC,CAACC,IAAF,IAAU,WAAV;AACA,qBAAO,OAAO1C,aAAP,KAAyB,UAAzB,GAAsCA,aAAa,CAACyC,CAAD,CAAnD,GAAyD,KAAK,CAArE;AACD,aAHD;;AAIA,aAAC,UAAStF,QAAT,EAAmB;AAClBiD,cAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,gBAAAA,MAAM,EAAEN,uBADsC;AAE9CO,gBAAAA,QAAQ,EAAE,kDAFoC;AAG9CC,gBAAAA,QAAQ,EAAE;AAHoC,eAA7B,CAAnB;;AAKAJ,cAAAA,KAAK,CAAC1D,MAAN,CAAa;AACXkD,gBAAAA,GAAG,EAAEA,GADM;AAEXE,gBAAAA,IAAI,EAAE3D,SAAS,CAACyG,SAAV,CAAoBtD,CAApB,CAFK;AAGXK,gBAAAA,KAAK,EAAEA,KAHI;AAIXf,gBAAAA,CAAC,EAAEwB,KAAK,CAACtB,EAJE;AAKXe,gBAAAA,aAAa,EAAEkC;AALJ,eAAb,EAMG9B,gBAAgB,CAACQ,KAAjB,CAAuB;AACxBC,gBAAAA,SAAS,EAAG,YAAW;AACrB,yBAAO,YAAW;AAChB,2BAAOsB,GAAG,GAAG7B,SAAS,CAAC,CAAD,CAAtB;AACD,mBAFD;AAGD,iBAJU,EADa;AAMxBQ,gBAAAA,MAAM,EAAE;AANgB,eAAvB,CANH;;AAcAV,cAAAA,gBAAgB,CAACW,QAAjB;AACD,aArBD,EAqBG,YAAW;AACZjE,cAAAA,SAAS,CAACuE,EAAD,CAAT;AACAvE,cAAAA,SAAS,CAACsE,CAAD,CAAT;AACAtE,cAAAA,SAAS,CAAC2C,CAAD,CAAT;AACAM,cAAAA,GAAG,CAACiD,KAAJ;AACA,qBAAOnD,EAAE,CAACsC,GAAD,CAAT;AACD,aA3BD;AA4BD,WA7ED;AA8ED,SA1FD;AA2FD,OA5FQ,CA4FN,IA5FM,CAvBT;AAoHD,KAlID;;AAoIA,WAAO/F,MAAP;AAED,GA1TQ,EAAT;;AA4TAW,EAAAA,MAAM,GAAG,UAAS8B,IAAT,EAAegB,EAAf,EAAmB;AAC1B,QAAIf,CAAJ,EAAOC,CAAP,EAAUC,EAAV,EAAcC,EAAd,EAAkBa,KAAlB,EAAyBmD,GAAzB,EAA8BlD,GAA9B,EAAmCX,KAAnC,EAA0CD,CAA1C,EAA6Ca,aAA7C,EAA4Dd,CAA5D,EAA+De,IAA/D,EAAqEC,EAArE,EAAyEC,uBAAzE,EAAkGC,gBAAlG,EAAoHjD,QAApH;;AACAA,IAAAA,QAAQ,GAAGC,aAAX;AACA+C,IAAAA,uBAAuB,GAAGvD,IAAI,CAACyD,YAAL,CAAkBC,SAAlB,CAA1B;AACAP,IAAAA,GAAG,GAAGlB,IAAI,CAACkB,GAAX,EAAgBE,IAAI,GAAGpB,IAAI,CAACoB,IAA5B,EAAkCf,CAAC,GAAGL,IAAI,CAACK,CAA3C,EAA8CJ,CAAC,GAAGD,IAAI,CAACC,CAAvD,EAA0DK,CAAC,GAAGN,IAAI,CAACM,CAAnE,EAAsEH,EAAE,GAAGH,IAAI,CAACG,EAAhF,EAAoFC,EAAE,GAAGJ,IAAI,CAACI,EAA9F,EAAkGF,CAAC,GAAGF,IAAI,CAACE,CAA3G,EAA8GK,KAAK,GAAGP,IAAI,CAACO,KAA3H,EAAkIY,aAAa,GAAGnB,IAAI,CAACmB,aAAvJ,EAAsKF,KAAK,GAAGjB,IAAI,CAACiB,KAAnL;AACAmD,IAAAA,GAAG,GAAG,IAAI7G,MAAJ,CAAW;AACf8C,MAAAA,CAAC,EAAEA,CADY;AAEfJ,MAAAA,CAAC,EAAEA,CAFY;AAGfK,MAAAA,CAAC,EAAEA,CAHY;AAIfJ,MAAAA,CAAC,EAAEA,CAJY;AAKfC,MAAAA,EAAE,EAAEA,EALW;AAMfC,MAAAA,EAAE,EAAEA,EANW;AAOfG,MAAAA,KAAK,EAAEA;AAPQ,KAAX,CAAN;AASA,KAAC,UAASmB,KAAT,EAAgB;AACf,aAAQ,UAASpD,QAAT,EAAmB;AACzBiD,QAAAA,gBAAgB,GAAG,IAAIxD,IAAI,CAAC4D,SAAT,CAAmBrD,QAAnB,EAA6B;AAC9CsD,UAAAA,MAAM,EAAEN,uBADsC;AAE9CO,UAAAA,QAAQ,EAAE;AAFoC,SAA7B,CAAnB;AAIAuC,QAAAA,GAAG,CAAClB,GAAJ,CAAQ;AACNhC,UAAAA,GAAG,EAAEA,GADC;AAENE,UAAAA,IAAI,EAAEA,IAFA;AAGND,UAAAA,aAAa,EAAEA,aAHT;AAINF,UAAAA,KAAK,EAAEA;AAJD,SAAR,EAKGM,gBAAgB,CAACQ,KAAjB,CAAuB;AACxBC,UAAAA,SAAS,EAAG,YAAW;AACrB,mBAAO,YAAW;AAChB,qBAAOX,EAAE,GAAGI,SAAS,CAAC,CAAD,CAArB;AACD,aAFD;AAGD,WAJU,EADa;AAMxBQ,UAAAA,MAAM,EAAE;AANgB,SAAvB,CALH;;AAaAV,QAAAA,gBAAgB,CAACW,QAAjB;AACD,OAnBD;AAoBD,KArBD,EAqBG,IArBH,EAqBU,UAASR,KAAT,EAAgB;AACxB,aAAO,YAAW;AAChB,eAAOV,EAAE,CAACK,EAAD,CAAT;AACD,OAFD;AAGD,KAJQ,CAIN,IAJM,CArBT;AA0BD,GAxCD;;AA0CAgD,EAAAA,OAAO,CAAC9G,MAAR,GAAiBA,MAAjB;AAEA8G,EAAAA,OAAO,CAACnG,MAAR,GAAiBA,MAAjB;AAEAmG,EAAAA,OAAO,CAAChG,gBAAR,GAA2BA,gBAA3B;AAED,CAhdD,EAgdGiG,IAhdH,CAgdQ,IAhdR","sourcesContent":["// Generated by IcedCoffeeScript 108.0.8\n(function() {\n  var HMAC_SHA256, Salsa20InnerCore, Scrypt, Timer, WordArray, blkcpy, blkxor, default_delay, endian_reverse, fixup_uint32, iced, pbkdf2, scrub_vec, scrypt, timer, ui8a_to_buffer, v_endian_reverse, __iced_k, __iced_k_noop, _ref, _ref1, _ref2;\n\n  iced = require('iced-runtime');\n  __iced_k = __iced_k_noop = function() {};\n\n  HMAC_SHA256 = require('./hmac').HMAC_SHA256;\n\n  pbkdf2 = require('./pbkdf2').pbkdf2;\n\n  _ref = require('./salsa20'), endian_reverse = _ref.endian_reverse, Salsa20InnerCore = _ref.Salsa20InnerCore;\n\n  _ref1 = require('./wordarray'), ui8a_to_buffer = _ref1.ui8a_to_buffer, WordArray = _ref1.WordArray;\n\n  _ref2 = require('./util'), fixup_uint32 = _ref2.fixup_uint32, default_delay = _ref2.default_delay, scrub_vec = _ref2.scrub_vec;\n\n  Timer = (function() {\n    function Timer() {\n      this.tot = 0;\n    }\n\n    Timer.prototype.start = function() {\n      return this._t = Date.now();\n    };\n\n    Timer.prototype.stop = function() {\n      return this.tot += Date.now() - this._t;\n    };\n\n    return Timer;\n\n  })();\n\n  timer = new Timer();\n\n  blkcpy = function(D, S, d_offset, s_offset, len) {\n    var end, i, j;\n    j = (d_offset << 4) | 0;\n    i = (s_offset << 4) | 0;\n    end = (i + (len << 4)) | 0;\n    while (i < end) {\n      D[j] = S[i];\n      D[j + 1] = S[i + 1];\n      D[j + 2] = S[i + 2];\n      D[j + 3] = S[i + 3];\n      D[j + 4] = S[i + 4];\n      D[j + 5] = S[i + 5];\n      D[j + 6] = S[i + 6];\n      D[j + 7] = S[i + 7];\n      D[j + 8] = S[i + 8];\n      D[j + 9] = S[i + 9];\n      D[j + 10] = S[i + 10];\n      D[j + 11] = S[i + 11];\n      D[j + 12] = S[i + 12];\n      D[j + 13] = S[i + 13];\n      D[j + 14] = S[i + 14];\n      D[j + 15] = S[i + 15];\n      i += 16;\n      j += 16;\n    }\n    return true;\n  };\n\n  blkxor = function(D, S, s_offset, len) {\n    var i, j;\n    len = (len << 4) | 0;\n    i = 0;\n    j = (s_offset << 4) | 0;\n    while (i < len) {\n      D[i] ^= S[j];\n      D[i + 1] ^= S[j + 1];\n      D[i + 2] ^= S[j + 2];\n      D[i + 3] ^= S[j + 3];\n      D[i + 4] ^= S[j + 4];\n      D[i + 5] ^= S[j + 5];\n      D[i + 6] ^= S[j + 6];\n      D[i + 7] ^= S[j + 7];\n      D[i + 8] ^= S[j + 8];\n      D[i + 9] ^= S[j + 9];\n      D[i + 10] ^= S[j + 10];\n      D[i + 11] ^= S[j + 11];\n      D[i + 12] ^= S[j + 12];\n      D[i + 13] ^= S[j + 13];\n      D[i + 14] ^= S[j + 14];\n      D[i + 15] ^= S[j + 15];\n      i += 16;\n      j += 16;\n    }\n    return true;\n  };\n\n  v_endian_reverse = function(v) {\n    var e, i, _i, _len;\n    for (i = _i = 0, _len = v.length; _i < _len; i = ++_i) {\n      e = v[i];\n      v[i] = endian_reverse(e);\n    }\n    return true;\n  };\n\n  Scrypt = (function() {\n    function Scrypt(_arg) {\n      var N, c, c0, c1;\n      N = _arg.N, this.r = _arg.r, this.p = _arg.p, c = _arg.c, c0 = _arg.c0, c1 = _arg.c1, this.klass = _arg.klass;\n      this.N || (this.N = 1 << (N || 15));\n      this.r || (this.r = 8);\n      this.p || (this.p = 1);\n      this.c0 = c0 || c || 1;\n      this.c1 = c1 || c || 1;\n      this.klass || (this.klass = HMAC_SHA256);\n      this.X16_tmp = new Int32Array(0x10);\n      this.s20ic = new Salsa20InnerCore(8);\n    }\n\n    Scrypt.prototype.salsa20_8 = function(B) {\n      var X, i, x, _i, _len;\n      X = this.s20ic._core(B);\n      for (i = _i = 0, _len = X.length; _i < _len; i = ++_i) {\n        x = X[i];\n        B[i] += x;\n      }\n      return true;\n    };\n\n    Scrypt.prototype.pbkdf2 = function(_arg, cb) {\n      var c, dkLen, key, progress_hook, salt, wa, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook, c = _arg.c;\n      (function(_this) {\n        return (function(__iced_k) {\n          __iced_deferrals = new iced.Deferrals(__iced_k, {\n            parent: ___iced_passed_deferral,\n            filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n            funcname: \"Scrypt.pbkdf2\"\n          });\n          pbkdf2({\n            key: key,\n            salt: salt,\n            c: c,\n            dkLen: dkLen,\n            klass: _this.klass,\n            progress_hook: progress_hook\n          }, __iced_deferrals.defer({\n            assign_fn: (function() {\n              return function() {\n                return wa = arguments[0];\n              };\n            })(),\n            lineno: 109\n          }));\n          __iced_deferrals._fulfill();\n        });\n      })(this)((function(_this) {\n        return function() {\n          return cb(wa);\n        };\n      })(this));\n    };\n\n    Scrypt.prototype.blockmix_salsa8 = function(B, Y) {\n      var X, i, _i, _ref3;\n      X = this.X16_tmp;\n      blkcpy(X, B, 0, 2 * this.r - 1, 1);\n      for (i = _i = 0, _ref3 = 2 * this.r; 0 <= _ref3 ? _i < _ref3 : _i > _ref3; i = 0 <= _ref3 ? ++_i : --_i) {\n        blkxor(X, B, i, 1);\n        this.salsa20_8(X);\n        blkcpy(Y, X, i, 0, 1);\n      }\n      i = 0;\n      while (i < this.r) {\n        blkcpy(B, Y, i, i * 2, 1);\n        i++;\n      }\n      i = 0;\n      while (i < this.r) {\n        blkcpy(B, Y, i + this.r, i * 2 + 1, 1);\n        i++;\n      }\n      return true;\n    };\n\n    Scrypt.prototype.smix = function(_arg, cb) {\n      var B, V, X, XY, Y, i, j, lim, progress_hook, stop, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      B = _arg.B, V = _arg.V, XY = _arg.XY, progress_hook = _arg.progress_hook;\n      X = XY;\n      lim = 2 * this.r;\n      Y = XY.subarray(0x10 * lim);\n      blkcpy(X, B, 0, 0, lim);\n      i = 0;\n      (function(_this) {\n        return (function(__iced_k) {\n          var _while;\n          _while = function(__iced_k) {\n            var _break, _continue, _next;\n            _break = __iced_k;\n            _continue = function() {\n              return iced.trampoline(function() {\n                return _while(__iced_k);\n              });\n            };\n            _next = _continue;\n            if (!(i < _this.N)) {\n              return _break();\n            } else {\n              stop = Math.min(_this.N, i + 2048);\n              while (i < stop) {\n                blkcpy(V, X, lim * i, 0, lim);\n                _this.blockmix_salsa8(X, Y);\n                i++;\n              }\n              if (typeof progress_hook === \"function\") {\n                progress_hook(i);\n              }\n              (function(__iced_k) {\n                __iced_deferrals = new iced.Deferrals(__iced_k, {\n                  parent: ___iced_passed_deferral,\n                  filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                  funcname: \"Scrypt.smix\"\n                });\n                default_delay(0, 0, __iced_deferrals.defer({\n                  lineno: 166\n                }));\n                __iced_deferrals._fulfill();\n              })(_next);\n            }\n          };\n          _while(__iced_k);\n        });\n      })(this)((function(_this) {\n        return function() {\n          i = 0;\n          (function(__iced_k) {\n            var _while;\n            _while = function(__iced_k) {\n              var _break, _continue, _next;\n              _break = __iced_k;\n              _continue = function() {\n                return iced.trampoline(function() {\n                  return _while(__iced_k);\n                });\n              };\n              _next = _continue;\n              if (!(i < _this.N)) {\n                return _break();\n              } else {\n                stop = Math.min(_this.N, i + 256);\n                while (i < stop) {\n                  j = fixup_uint32(X[0x10 * (lim - 1)]) & (_this.N - 1);\n                  blkxor(X, V, j * lim, lim);\n                  _this.blockmix_salsa8(X, Y);\n                  i++;\n                }\n                if (typeof progress_hook === \"function\") {\n                  progress_hook(i + _this.N);\n                }\n                (function(__iced_k) {\n                  __iced_deferrals = new iced.Deferrals(__iced_k, {\n                    parent: ___iced_passed_deferral,\n                    filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                    funcname: \"Scrypt.smix\"\n                  });\n                  default_delay(0, 0, __iced_deferrals.defer({\n                    lineno: 183\n                  }));\n                  __iced_deferrals._fulfill();\n                })(_next);\n              }\n            };\n            _while(__iced_k);\n          })(function() {\n            blkcpy(B, X, 0, 0, lim);\n            return cb();\n          });\n        };\n      })(this));\n    };\n\n    Scrypt.prototype.run = function(_arg, cb) {\n      var B, MAX, V, XY, dkLen, err, j, key, lph, out, progress_hook, ret, salt, ___iced_passed_deferral, __iced_deferrals, __iced_k, _begin, _end, _positive;\n      __iced_k = __iced_k_noop;\n      ___iced_passed_deferral = iced.findDeferral(arguments);\n      key = _arg.key, salt = _arg.salt, dkLen = _arg.dkLen, progress_hook = _arg.progress_hook;\n      MAX = 0xffffffff;\n      err = ret = null;\n      err = dkLen > MAX ? err = new Error(\"asked for too much data\") : this.r * this.p >= (1 << 30) ? new Error(\"r & p are too big\") : (this.r > MAX / 128 / this.p) || (this.r > MAX / 256) || (this.N > MAX / 128 / this.r) ? new Error(\"N is too big\") : null;\n      XY = new Int32Array(64 * this.r);\n      V = new Int32Array(32 * this.r * this.N);\n      lph = function(o) {\n        o.what += \" (pass 1)\";\n        return typeof progress_hook === \"function\" ? progress_hook(o) : void 0;\n      };\n      (function(_this) {\n        return (function(__iced_k) {\n          __iced_deferrals = new iced.Deferrals(__iced_k, {\n            parent: ___iced_passed_deferral,\n            filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n            funcname: \"Scrypt.run\"\n          });\n          _this.pbkdf2({\n            key: key.clone(),\n            salt: salt,\n            dkLen: 128 * _this.r * _this.p,\n            c: _this.c0,\n            progress_hook: lph\n          }, __iced_deferrals.defer({\n            assign_fn: (function() {\n              return function() {\n                return B = arguments[0];\n              };\n            })(),\n            lineno: 214\n          }));\n          __iced_deferrals._fulfill();\n        });\n      })(this)((function(_this) {\n        return function() {\n          B = new Int32Array(B.words);\n          v_endian_reverse(B);\n          lph = function(j) {\n            return function(i) {\n              return typeof progress_hook === \"function\" ? progress_hook({\n                i: i + j * _this.N * 2,\n                what: \"scrypt\",\n                total: _this.p * _this.N * 2\n              }) : void 0;\n            };\n          };\n          (function(__iced_k) {\n            var _i, _results, _while;\n            j = 0;\n            _begin = 0;\n            _end = _this.p;\n            _positive = _end > _begin;\n            _while = function(__iced_k) {\n              var _break, _continue, _next;\n              _break = __iced_k;\n              _continue = function() {\n                return iced.trampoline(function() {\n                  if (_positive) {\n                    j += 1;\n                  } else {\n                    j -= 1;\n                  }\n                  return _while(__iced_k);\n                });\n              };\n              _next = _continue;\n              if (!!((_positive === true && j >= _this.p) || (_positive === false && j <= _this.p))) {\n                return _break();\n              } else {\n\n                (function(__iced_k) {\n                  __iced_deferrals = new iced.Deferrals(__iced_k, {\n                    parent: ___iced_passed_deferral,\n                    filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                    funcname: \"Scrypt.run\"\n                  });\n                  _this.smix({\n                    B: B.subarray(32 * _this.r * j),\n                    V: V,\n                    XY: XY,\n                    progress_hook: lph(j)\n                  }, __iced_deferrals.defer({\n                    lineno: 221\n                  }));\n                  __iced_deferrals._fulfill();\n                })(_next);\n              }\n            };\n            _while(__iced_k);\n          })(function() {\n            v_endian_reverse(B);\n            lph = function(o) {\n              o.what += \" (pass 2)\";\n              return typeof progress_hook === \"function\" ? progress_hook(o) : void 0;\n            };\n            (function(__iced_k) {\n              __iced_deferrals = new iced.Deferrals(__iced_k, {\n                parent: ___iced_passed_deferral,\n                filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\",\n                funcname: \"Scrypt.run\"\n              });\n              _this.pbkdf2({\n                key: key,\n                salt: WordArray.from_i32a(B),\n                dkLen: dkLen,\n                c: _this.c1,\n                progress_hook: lph\n              }, __iced_deferrals.defer({\n                assign_fn: (function() {\n                  return function() {\n                    return out = arguments[0];\n                  };\n                })(),\n                lineno: 229\n              }));\n              __iced_deferrals._fulfill();\n            })(function() {\n              scrub_vec(XY);\n              scrub_vec(V);\n              scrub_vec(B);\n              key.scrub();\n              return cb(out);\n            });\n          });\n        };\n      })(this));\n    };\n\n    return Scrypt;\n\n  })();\n\n  scrypt = function(_arg, cb) {\n    var N, c, c0, c1, dkLen, eng, key, klass, p, progress_hook, r, salt, wa, ___iced_passed_deferral, __iced_deferrals, __iced_k;\n    __iced_k = __iced_k_noop;\n    ___iced_passed_deferral = iced.findDeferral(arguments);\n    key = _arg.key, salt = _arg.salt, r = _arg.r, N = _arg.N, p = _arg.p, c0 = _arg.c0, c1 = _arg.c1, c = _arg.c, klass = _arg.klass, progress_hook = _arg.progress_hook, dkLen = _arg.dkLen;\n    eng = new Scrypt({\n      r: r,\n      N: N,\n      p: p,\n      c: c,\n      c0: c0,\n      c1: c1,\n      klass: klass\n    });\n    (function(_this) {\n      return (function(__iced_k) {\n        __iced_deferrals = new iced.Deferrals(__iced_k, {\n          parent: ___iced_passed_deferral,\n          filename: \"/Users/max/src/keybase/triplesec/src/scrypt.iced\"\n        });\n        eng.run({\n          key: key,\n          salt: salt,\n          progress_hook: progress_hook,\n          dkLen: dkLen\n        }, __iced_deferrals.defer({\n          assign_fn: (function() {\n            return function() {\n              return wa = arguments[0];\n            };\n          })(),\n          lineno: 259\n        }));\n        __iced_deferrals._fulfill();\n      });\n    })(this)((function(_this) {\n      return function() {\n        return cb(wa);\n      };\n    })(this));\n  };\n\n  exports.Scrypt = Scrypt;\n\n  exports.scrypt = scrypt;\n\n  exports.v_endian_reverse = v_endian_reverse;\n\n}).call(this);\n"]},"metadata":{},"sourceType":"script"}