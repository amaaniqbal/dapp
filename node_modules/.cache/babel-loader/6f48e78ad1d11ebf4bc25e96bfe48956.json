{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nconst tslib_1 = require(\"tslib\");\n\nfunction isSubtleCryptoAvailable() {\n  return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\n\nexports.isSubtleCryptoAvailable = isSubtleCryptoAvailable;\n\nfunction isNodeCryptoAvailable(withFeature) {\n  try {\n    const resolvedResult = require.resolve('crypto');\n\n    if (!resolvedResult) {\n      return false;\n    } // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n\n\n    const cryptoModule = require('crypto');\n\n    if (!cryptoModule) {\n      return false;\n    }\n\n    if (withFeature) {\n      const features = withFeature(cryptoModule);\n      return features;\n    }\n\n    return true;\n  } catch (error) {\n    return false;\n  }\n}\n\nexports.isNodeCryptoAvailable = isNodeCryptoAvailable;\nexports.NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.'; // Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\n\nfunction getCryptoLib() {\n  return tslib_1.__awaiter(this, void 0, void 0, function* () {\n    if (isSubtleCryptoAvailable()) {\n      return {\n        lib: crypto.subtle,\n        name: 'subtleCrypto'\n      };\n    } else {\n      try {\n        // eslint-disable-next-line max-len\n        // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n        const nodeCrypto = require('crypto');\n\n        return {\n          lib: nodeCrypto,\n          name: 'nodeCrypto'\n        };\n      } catch (error) {\n        throw new Error(exports.NO_CRYPTO_LIB);\n      }\n    }\n  });\n}\n\nexports.getCryptoLib = getCryptoLib;","map":{"version":3,"sources":["../../src/encryption/cryptoUtils.ts"],"names":[],"mappings":";;;;;;;;AACA,SAAgB,uBAAhB,GAAuC;AACrC,SAAO,OAAO,MAAP,KAAkB,WAAlB,IAAiC,OAAO,MAAM,CAAC,MAAd,KAAyB,WAAjE;AACD;;AAFD,OAAA,CAAA,uBAAA,GAAA,uBAAA;;AAOA,SAAgB,qBAAhB,CACE,WADF,EACoE;AAElE,MAAI;AACF,UAAM,cAAc,GAAG,OAAO,CAAC,OAAR,CAAgB,QAAhB,CAAvB;;AACA,QAAI,CAAC,cAAL,EAAqB;AACnB,aAAO,KAAP;AACD,KAJC,CAKF;;;AACA,UAAM,YAAY,GAAG,OAAO,CAAC,QAAD,CAA5B;;AACA,QAAI,CAAC,YAAL,EAAmB;AACjB,aAAO,KAAP;AACD;;AACD,QAAI,WAAJ,EAAiB;AACf,YAAM,QAAQ,GAAG,WAAW,CAAC,YAAD,CAA5B;AACA,aAAO,QAAP;AACD;;AACD,WAAO,IAAP;AACD,GAfD,CAeE,OAAO,KAAP,EAAc;AACd,WAAO,KAAP;AACD;AACF;;AArBD,OAAA,CAAA,qBAAA,GAAA,qBAAA;AAuBa,OAAA,CAAA,aAAA,GAAgB,0GAAhB,C,CAgBb;AACA;;AACA,SAAsB,YAAtB,GAAkC;;AAChC,QAAI,uBAAuB,EAA3B,EAA+B;AAC7B,aAAO;AACL,QAAA,GAAG,EAAE,MAAM,CAAC,MADP;AAEL,QAAA,IAAI,EAAE;AAFD,OAAP;AAID,KALD,MAKO;AACL,UAAI;AACF;AACA;AACA,cAAM,UAAU,GAAG,OAAO,CAAC,QAAD,CAA1B;;AACA,eAAO;AACL,UAAA,GAAG,EAAE,UADA;AAEL,UAAA,IAAI,EAAE;AAFD,SAAP;AAID,OARD,CAQE,OAAO,KAAP,EAAc;AACd,cAAM,IAAI,KAAJ,CAAU,OAAA,CAAA,aAAV,CAAN;AACD;AACF;AACF,G;AAAA;;AAnBD,OAAA,CAAA,YAAA,GAAA,YAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst tslib_1 = require(\"tslib\");\nfunction isSubtleCryptoAvailable() {\n    return typeof crypto !== 'undefined' && typeof crypto.subtle !== 'undefined';\n}\nexports.isSubtleCryptoAvailable = isSubtleCryptoAvailable;\nfunction isNodeCryptoAvailable(withFeature) {\n    try {\n        const resolvedResult = require.resolve('crypto');\n        if (!resolvedResult) {\n            return false;\n        }\n        // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require\n        const cryptoModule = require('crypto');\n        if (!cryptoModule) {\n            return false;\n        }\n        if (withFeature) {\n            const features = withFeature(cryptoModule);\n            return features;\n        }\n        return true;\n    }\n    catch (error) {\n        return false;\n    }\n}\nexports.isNodeCryptoAvailable = isNodeCryptoAvailable;\nexports.NO_CRYPTO_LIB = 'Crypto lib not found. Either the WebCrypto \"crypto.subtle\" or Node.js \"crypto\" module must be available.';\n// Make async for future version which may lazy load.\n// eslint-disable-next-line @typescript-eslint/require-await\nfunction getCryptoLib() {\n    return tslib_1.__awaiter(this, void 0, void 0, function* () {\n        if (isSubtleCryptoAvailable()) {\n            return {\n                lib: crypto.subtle,\n                name: 'subtleCrypto'\n            };\n        }\n        else {\n            try {\n                // eslint-disable-next-line max-len\n                // eslint-disable-next-line import/no-nodejs-modules,no-restricted-modules,global-require,@typescript-eslint/no-var-requires\n                const nodeCrypto = require('crypto');\n                return {\n                    lib: nodeCrypto,\n                    name: 'nodeCrypto'\n                };\n            }\n            catch (error) {\n                throw new Error(exports.NO_CRYPTO_LIB);\n            }\n        }\n    });\n}\nexports.getCryptoLib = getCryptoLib;\n//# sourceMappingURL=cryptoUtils.js.map"]},"metadata":{},"sourceType":"script"}