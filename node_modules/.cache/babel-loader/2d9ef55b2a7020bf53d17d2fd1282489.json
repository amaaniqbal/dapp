{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n}); // @ts-ignore: Could not find a declaration file for module\n\nconst inspector = require(\"schema-inspector\");\n\nconst profile_1 = require(\"../profile\");\n\nconst profileTokens_1 = require(\"../profileTokens\");\n\nconst personLegacy_1 = require(\"./personLegacy\");\n\nconst personUtils_1 = require(\"./personUtils\");\n\nconst schemaDefinition = {\n  type: 'object',\n  strict: false,\n  properties: {\n    '@context': {\n      type: 'string',\n      optional: true\n    },\n    '@type': {\n      type: 'string'\n    },\n    '@id': {\n      type: 'string',\n      optional: true\n    },\n    name: {\n      type: 'string',\n      optional: true\n    },\n    givenName: {\n      type: 'string',\n      optional: true\n    },\n    familyName: {\n      type: 'string',\n      optional: true\n    },\n    description: {\n      type: 'string',\n      optional: true\n    },\n    image: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': {\n            type: 'string'\n          },\n          name: {\n            type: 'string',\n            optional: true\n          },\n          contentUrl: {\n            type: 'string',\n            optional: true\n          }\n        }\n      }\n    },\n    website: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': {\n            type: 'string'\n          },\n          url: {\n            type: 'string',\n            optional: true\n          }\n        }\n      }\n    },\n    account: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': {\n            type: 'string'\n          },\n          service: {\n            type: 'string',\n            optional: true\n          },\n          identifier: {\n            type: 'string',\n            optional: true\n          },\n          proofType: {\n            type: 'string',\n            optional: true\n          },\n          proofUrl: {\n            type: 'string',\n            optional: true\n          },\n          proofMessage: {\n            type: 'string',\n            optional: true\n          },\n          proofSignature: {\n            type: 'string',\n            optional: true\n          }\n        }\n      }\n    },\n    worksFor: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': {\n            type: 'string'\n          },\n          '@id': {\n            type: 'string',\n            optional: true\n          }\n        }\n      }\n    },\n    knows: {\n      type: 'array',\n      optional: true,\n      items: {\n        type: 'object',\n        properties: {\n          '@type': {\n            type: 'string'\n          },\n          '@id': {\n            type: 'string',\n            optional: true\n          }\n        }\n      }\n    },\n    address: {\n      type: 'object',\n      optional: true,\n      properties: {\n        '@type': {\n          type: 'string'\n        },\n        streetAddress: {\n          type: 'string',\n          optional: true\n        },\n        addressLocality: {\n          type: 'string',\n          optional: true\n        },\n        postalCode: {\n          type: 'string',\n          optional: true\n        },\n        addressCountry: {\n          type: 'string',\n          optional: true\n        }\n      }\n    },\n    birthDate: {\n      type: 'string',\n      optional: true\n    },\n    taxID: {\n      type: 'string',\n      optional: true\n    }\n  }\n};\n/**\n * @ignore\n */\n\nclass Person extends profile_1.Profile {\n  constructor(profile = {}) {\n    super(profile);\n    this._profile = Object.assign({}, {\n      '@type': 'Person'\n    }, this._profile);\n  }\n\n  static validateSchema(profile, strict = false) {\n    schemaDefinition.strict = strict;\n    return inspector.validate(schemaDefinition, profile);\n  }\n\n  static fromToken(token, publicKeyOrAddress = null) {\n    const profile = profileTokens_1.extractProfile(token, publicKeyOrAddress);\n    return new Person(profile);\n  }\n\n  static fromLegacyFormat(legacyProfile) {\n    const profile = personLegacy_1.getPersonFromLegacyFormat(legacyProfile);\n    return new Person(profile);\n  }\n\n  toJSON() {\n    return {\n      profile: this.profile(),\n      name: this.name(),\n      givenName: this.givenName(),\n      familyName: this.familyName(),\n      description: this.description(),\n      avatarUrl: this.avatarUrl(),\n      verifiedAccounts: this.verifiedAccounts(),\n      address: this.address(),\n      birthDate: this.birthDate(),\n      connections: this.connections(),\n      organizations: this.organizations()\n    };\n  }\n\n  profile() {\n    return Object.assign({}, this._profile);\n  }\n\n  name() {\n    return personUtils_1.getName(this.profile());\n  }\n\n  givenName() {\n    return personUtils_1.getGivenName(this.profile());\n  }\n\n  familyName() {\n    return personUtils_1.getFamilyName(this.profile());\n  }\n\n  description() {\n    return personUtils_1.getDescription(this.profile());\n  }\n\n  avatarUrl() {\n    return personUtils_1.getAvatarUrl(this.profile());\n  }\n\n  verifiedAccounts(verifications) {\n    return personUtils_1.getVerifiedAccounts(this.profile(), verifications);\n  }\n\n  address() {\n    return personUtils_1.getAddress(this.profile());\n  }\n\n  birthDate() {\n    return personUtils_1.getBirthDate(this.profile());\n  }\n\n  connections() {\n    return personUtils_1.getConnections(this.profile());\n  }\n\n  organizations() {\n    return personUtils_1.getOrganizations(this.profile());\n  }\n\n}\n\nexports.Person = Person;","map":{"version":3,"sources":["../../../src/profiles/profileSchemas/person.ts"],"names":[],"mappings":";;;;IAAA;;AACA,MAAA,SAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AAEA,MAAA,SAAA,GAAA,OAAA,CAAA,YAAA,CAAA;;AACA,MAAA,eAAA,GAAA,OAAA,CAAA,kBAAA,CAAA;;AACA,MAAA,cAAA,GAAA,OAAA,CAAA,gBAAA,CAAA;;AACA,MAAA,aAAA,GAAA,OAAA,CAAA,eAAA,CAAA;;AAMA,MAAM,gBAAgB,GAAG;AACvB,EAAA,IAAI,EAAE,QADiB;AAEvB,EAAA,MAAM,EAAE,KAFe;AAGvB,EAAA,UAAU,EAAE;AACV,gBAAY;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KADF;AAEV,aAAS;AAAE,MAAA,IAAI,EAAE;AAAR,KAFC;AAGV,WAAO;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KAHG;AAIV,IAAA,IAAI,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KAJI;AAKV,IAAA,SAAS,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KALD;AAMV,IAAA,UAAU,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KANF;AAOV,IAAA,WAAW,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KAPH;AAQV,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,OADD;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE,QADD;AAEL,QAAA,UAAU,EAAE;AACV,mBAAS;AAAE,YAAA,IAAI,EAAE;AAAR,WADC;AAEV,UAAA,IAAI,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WAFI;AAGV,UAAA,UAAU,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B;AAHF;AAFP;AAHF,KARG;AAoBV,IAAA,OAAO,EAAE;AACP,MAAA,IAAI,EAAE,OADC;AAEP,MAAA,QAAQ,EAAE,IAFH;AAGP,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE,QADD;AAEL,QAAA,UAAU,EAAE;AACV,mBAAS;AAAE,YAAA,IAAI,EAAE;AAAR,WADC;AAEV,UAAA,GAAG,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B;AAFK;AAFP;AAHA,KApBC;AA+BV,IAAA,OAAO,EAAE;AACP,MAAA,IAAI,EAAE,OADC;AAEP,MAAA,QAAQ,EAAE,IAFH;AAGP,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE,QADD;AAEL,QAAA,UAAU,EAAE;AACV,mBAAS;AAAE,YAAA,IAAI,EAAE;AAAR,WADC;AAEV,UAAA,OAAO,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WAFC;AAGV,UAAA,UAAU,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WAHF;AAIV,UAAA,SAAS,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WAJD;AAKV,UAAA,QAAQ,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WALA;AAMV,UAAA,YAAY,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B,WANJ;AAOV,UAAA,cAAc,EAAE;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B;AAPN;AAFP;AAHA,KA/BC;AA+CV,IAAA,QAAQ,EAAE;AACR,MAAA,IAAI,EAAE,OADE;AAER,MAAA,QAAQ,EAAE,IAFF;AAGR,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE,QADD;AAEL,QAAA,UAAU,EAAE;AACV,mBAAS;AAAE,YAAA,IAAI,EAAE;AAAR,WADC;AAEV,iBAAO;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B;AAFG;AAFP;AAHC,KA/CA;AA0DV,IAAA,KAAK,EAAE;AACL,MAAA,IAAI,EAAE,OADD;AAEL,MAAA,QAAQ,EAAE,IAFL;AAGL,MAAA,KAAK,EAAE;AACL,QAAA,IAAI,EAAE,QADD;AAEL,QAAA,UAAU,EAAE;AACV,mBAAS;AAAE,YAAA,IAAI,EAAE;AAAR,WADC;AAEV,iBAAO;AAAE,YAAA,IAAI,EAAE,QAAR;AAAkB,YAAA,QAAQ,EAAE;AAA5B;AAFG;AAFP;AAHF,KA1DG;AAqEV,IAAA,OAAO,EAAE;AACP,MAAA,IAAI,EAAE,QADC;AAEP,MAAA,QAAQ,EAAE,IAFH;AAGP,MAAA,UAAU,EAAE;AACV,iBAAS;AAAE,UAAA,IAAI,EAAE;AAAR,SADC;AAEV,QAAA,aAAa,EAAE;AAAE,UAAA,IAAI,EAAE,QAAR;AAAkB,UAAA,QAAQ,EAAE;AAA5B,SAFL;AAGV,QAAA,eAAe,EAAE;AAAE,UAAA,IAAI,EAAE,QAAR;AAAkB,UAAA,QAAQ,EAAE;AAA5B,SAHP;AAIV,QAAA,UAAU,EAAE;AAAE,UAAA,IAAI,EAAE,QAAR;AAAkB,UAAA,QAAQ,EAAE;AAA5B,SAJF;AAKV,QAAA,cAAc,EAAE;AAAE,UAAA,IAAI,EAAE,QAAR;AAAkB,UAAA,QAAQ,EAAE;AAA5B;AALN;AAHL,KArEC;AAgFV,IAAA,SAAS,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B,KAhFD;AAiFV,IAAA,KAAK,EAAE;AAAE,MAAA,IAAI,EAAE,QAAR;AAAkB,MAAA,QAAQ,EAAE;AAA5B;AAjFG;AAHW,CAAzB;AAwFA;;;;AAGA,MAAa,MAAb,SAA4B,SAAA,CAAA,OAA5B,CAAmC;AACjC,EAAA,WAAA,CAAY,OAAO,GAAG,EAAtB,EAAwB;AACtB,UAAM,OAAN;AACA,SAAK,QAAL,GAAgB,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB;AAChC,eAAS;AADuB,KAAlB,EAEb,KAAK,QAFQ,CAAhB;AAGD;;AAED,SAAO,cAAP,CAAsB,OAAtB,EAAoC,MAAM,GAAG,KAA7C,EAAkD;AAChD,IAAA,gBAAgB,CAAC,MAAjB,GAA0B,MAA1B;AACA,WAAO,SAAS,CAAC,QAAV,CAAmB,gBAAnB,EAAqC,OAArC,CAAP;AACD;;AAED,SAAO,SAAP,CAAiB,KAAjB,EAAgC,kBAAA,GAAoC,IAApE,EAAwE;AACtE,UAAM,OAAO,GAAG,eAAA,CAAA,cAAA,CAAe,KAAf,EAAsB,kBAAtB,CAAhB;AACA,WAAO,IAAI,MAAJ,CAAW,OAAX,CAAP;AACD;;AAED,SAAO,gBAAP,CAAwB,aAAxB,EAA0C;AACxC,UAAM,OAAO,GAAG,cAAA,CAAA,yBAAA,CAA0B,aAA1B,CAAhB;AACA,WAAO,IAAI,MAAJ,CAAW,OAAX,CAAP;AACD;;AAED,EAAA,MAAM,GAAA;AACJ,WAAO;AACL,MAAA,OAAO,EAAE,KAAK,OAAL,EADJ;AAEL,MAAA,IAAI,EAAE,KAAK,IAAL,EAFD;AAGL,MAAA,SAAS,EAAE,KAAK,SAAL,EAHN;AAIL,MAAA,UAAU,EAAE,KAAK,UAAL,EAJP;AAKL,MAAA,WAAW,EAAE,KAAK,WAAL,EALR;AAML,MAAA,SAAS,EAAE,KAAK,SAAL,EANN;AAOL,MAAA,gBAAgB,EAAE,KAAK,gBAAL,EAPb;AAQL,MAAA,OAAO,EAAE,KAAK,OAAL,EARJ;AASL,MAAA,SAAS,EAAE,KAAK,SAAL,EATN;AAUL,MAAA,WAAW,EAAE,KAAK,WAAL,EAVR;AAWL,MAAA,aAAa,EAAE,KAAK,aAAL;AAXV,KAAP;AAaD;;AAED,EAAA,OAAO,GAAA;AACL,WAAO,MAAM,CAAC,MAAP,CAAc,EAAd,EAAkB,KAAK,QAAvB,CAAP;AACD;;AAED,EAAA,IAAI,GAAA;AACF,WAAO,aAAA,CAAA,OAAA,CAAQ,KAAK,OAAL,EAAR,CAAP;AACD;;AAED,EAAA,SAAS,GAAA;AACP,WAAO,aAAA,CAAA,YAAA,CAAa,KAAK,OAAL,EAAb,CAAP;AACD;;AAED,EAAA,UAAU,GAAA;AACR,WAAO,aAAA,CAAA,aAAA,CAAc,KAAK,OAAL,EAAd,CAAP;AACD;;AAED,EAAA,WAAW,GAAA;AACT,WAAO,aAAA,CAAA,cAAA,CAAe,KAAK,OAAL,EAAf,CAAP;AACD;;AAED,EAAA,SAAS,GAAA;AACP,WAAO,aAAA,CAAA,YAAA,CAAa,KAAK,OAAL,EAAb,CAAP;AACD;;AAED,EAAA,gBAAgB,CAAC,aAAD,EAAsB;AACpC,WAAO,aAAA,CAAA,mBAAA,CAAoB,KAAK,OAAL,EAApB,EAAoC,aAApC,CAAP;AACD;;AAED,EAAA,OAAO,GAAA;AACL,WAAO,aAAA,CAAA,UAAA,CAAW,KAAK,OAAL,EAAX,CAAP;AACD;;AAED,EAAA,SAAS,GAAA;AACP,WAAO,aAAA,CAAA,YAAA,CAAa,KAAK,OAAL,EAAb,CAAP;AACD;;AAED,EAAA,WAAW,GAAA;AACT,WAAO,aAAA,CAAA,cAAA,CAAe,KAAK,OAAL,EAAf,CAAP;AACD;;AAED,EAAA,aAAa,GAAA;AACX,WAAO,aAAA,CAAA,gBAAA,CAAiB,KAAK,OAAL,EAAjB,CAAP;AACD;;AAjFgC;;AAAnC,OAAA,CAAA,MAAA,GAAA,MAAA","sourceRoot":"","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\n// @ts-ignore: Could not find a declaration file for module\nconst inspector = require(\"schema-inspector\");\nconst profile_1 = require(\"../profile\");\nconst profileTokens_1 = require(\"../profileTokens\");\nconst personLegacy_1 = require(\"./personLegacy\");\nconst personUtils_1 = require(\"./personUtils\");\nconst schemaDefinition = {\n    type: 'object',\n    strict: false,\n    properties: {\n        '@context': { type: 'string', optional: true },\n        '@type': { type: 'string' },\n        '@id': { type: 'string', optional: true },\n        name: { type: 'string', optional: true },\n        givenName: { type: 'string', optional: true },\n        familyName: { type: 'string', optional: true },\n        description: { type: 'string', optional: true },\n        image: {\n            type: 'array',\n            optional: true,\n            items: {\n                type: 'object',\n                properties: {\n                    '@type': { type: 'string' },\n                    name: { type: 'string', optional: true },\n                    contentUrl: { type: 'string', optional: true }\n                }\n            }\n        },\n        website: {\n            type: 'array',\n            optional: true,\n            items: {\n                type: 'object',\n                properties: {\n                    '@type': { type: 'string' },\n                    url: { type: 'string', optional: true }\n                }\n            }\n        },\n        account: {\n            type: 'array',\n            optional: true,\n            items: {\n                type: 'object',\n                properties: {\n                    '@type': { type: 'string' },\n                    service: { type: 'string', optional: true },\n                    identifier: { type: 'string', optional: true },\n                    proofType: { type: 'string', optional: true },\n                    proofUrl: { type: 'string', optional: true },\n                    proofMessage: { type: 'string', optional: true },\n                    proofSignature: { type: 'string', optional: true }\n                }\n            }\n        },\n        worksFor: {\n            type: 'array',\n            optional: true,\n            items: {\n                type: 'object',\n                properties: {\n                    '@type': { type: 'string' },\n                    '@id': { type: 'string', optional: true }\n                }\n            }\n        },\n        knows: {\n            type: 'array',\n            optional: true,\n            items: {\n                type: 'object',\n                properties: {\n                    '@type': { type: 'string' },\n                    '@id': { type: 'string', optional: true }\n                }\n            }\n        },\n        address: {\n            type: 'object',\n            optional: true,\n            properties: {\n                '@type': { type: 'string' },\n                streetAddress: { type: 'string', optional: true },\n                addressLocality: { type: 'string', optional: true },\n                postalCode: { type: 'string', optional: true },\n                addressCountry: { type: 'string', optional: true }\n            }\n        },\n        birthDate: { type: 'string', optional: true },\n        taxID: { type: 'string', optional: true }\n    }\n};\n/**\n * @ignore\n */\nclass Person extends profile_1.Profile {\n    constructor(profile = {}) {\n        super(profile);\n        this._profile = Object.assign({}, {\n            '@type': 'Person'\n        }, this._profile);\n    }\n    static validateSchema(profile, strict = false) {\n        schemaDefinition.strict = strict;\n        return inspector.validate(schemaDefinition, profile);\n    }\n    static fromToken(token, publicKeyOrAddress = null) {\n        const profile = profileTokens_1.extractProfile(token, publicKeyOrAddress);\n        return new Person(profile);\n    }\n    static fromLegacyFormat(legacyProfile) {\n        const profile = personLegacy_1.getPersonFromLegacyFormat(legacyProfile);\n        return new Person(profile);\n    }\n    toJSON() {\n        return {\n            profile: this.profile(),\n            name: this.name(),\n            givenName: this.givenName(),\n            familyName: this.familyName(),\n            description: this.description(),\n            avatarUrl: this.avatarUrl(),\n            verifiedAccounts: this.verifiedAccounts(),\n            address: this.address(),\n            birthDate: this.birthDate(),\n            connections: this.connections(),\n            organizations: this.organizations()\n        };\n    }\n    profile() {\n        return Object.assign({}, this._profile);\n    }\n    name() {\n        return personUtils_1.getName(this.profile());\n    }\n    givenName() {\n        return personUtils_1.getGivenName(this.profile());\n    }\n    familyName() {\n        return personUtils_1.getFamilyName(this.profile());\n    }\n    description() {\n        return personUtils_1.getDescription(this.profile());\n    }\n    avatarUrl() {\n        return personUtils_1.getAvatarUrl(this.profile());\n    }\n    verifiedAccounts(verifications) {\n        return personUtils_1.getVerifiedAccounts(this.profile(), verifications);\n    }\n    address() {\n        return personUtils_1.getAddress(this.profile());\n    }\n    birthDate() {\n        return personUtils_1.getBirthDate(this.profile());\n    }\n    connections() {\n        return personUtils_1.getConnections(this.profile());\n    }\n    organizations() {\n        return personUtils_1.getOrganizations(this.profile());\n    }\n}\nexports.Person = Person;\n//# sourceMappingURL=person.js.map"]},"metadata":{},"sourceType":"script"}